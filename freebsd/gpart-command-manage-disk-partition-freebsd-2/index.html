<!doctype html>
<!--
  Minimal Mistakes Jekyll Theme 4.20.2 by Michael Rose
  Copyright 2013-2020 Michael Rose - mademistakes.com | @mmistakes
  Free for personal and commercial use under the MIT license
  https://github.com/mmistakes/minimal-mistakes/blob/master/LICENSE
-->
<html lang="en" class="no-js">
  <head>
    <meta charset="utf-8">

<!-- begin _includes/seo.html --><title>gpart Command To Manage Disk Partitions in FreeBSD - Part 2 - UnixBSDShell</title>
<meta name="description" content="Instead, FreeBSD has established the gpart command as the default command for managing and organizing disks. This command is incredibly capable of managing partitions on the latest hard drives, up to terabytes in size. In fact, gpart can create, modify, and delete partitions very effectively and quickly">


  <meta name="author" content="UnixBSDShell's Blog">
  
  <meta property="article:author" content="UnixBSDShell's Blog">
  


<meta property="og:type" content="article">
<meta property="og:locale" content="en_US">
<meta property="og:site_name" content="UnixBSDShell">
<meta property="og:title" content="gpart Command To Manage Disk Partitions in FreeBSD - Part 2">
<meta property="og:url" content="https://unixwinbsd.site/freebsd/gpart-command-manage-disk-partition-freebsd-2/">


  <meta property="og:description" content="Instead, FreeBSD has established the gpart command as the default command for managing and organizing disks. This command is incredibly capable of managing partitions on the latest hard drives, up to terabytes in size. In fact, gpart can create, modify, and delete partitions very effectively and quickly">





  <meta name="twitter:site" content="@iwanset96143401">
  <meta name="twitter:title" content="gpart Command To Manage Disk Partitions in FreeBSD - Part 2">
  <meta name="twitter:description" content="Instead, FreeBSD has established the gpart command as the default command for managing and organizing disks. This command is incredibly capable of managing partitions on the latest hard drives, up to terabytes in size. In fact, gpart can create, modify, and delete partitions very effectively and quickly">
  <meta name="twitter:url" content="https://unixwinbsd.site/freebsd/gpart-command-manage-disk-partition-freebsd-2/">

  
    <meta name="twitter:card" content="summary">
    
  

  



  <meta property="article:published_time" content="2025-07-18T11:11:21+03:00">





  

  


<link rel="canonical" href="https://unixwinbsd.site/freebsd/gpart-command-manage-disk-partition-freebsd-2/">




<script type="application/ld+json">
  {
    "@context": "https://schema.org",
    
      "@type": "Person",
      "name": "UnixBSDShell Blog",
      "url": "https://unixwinbsd.site/"
    
  }
</script>


  <meta name="google-site-verification" content="googledc9be5e5382da4fd" />


  <meta name="msvalidate.01" content="BCDF1444D895EBA62C6422C90DF8EA1C">



  <meta name="yandex-verification" content="69d778baa1dbd371">


<!-- end _includes/seo.html -->


<link href="/feed.xml" type="application/atom+xml" rel="alternate" title="UnixBSDShell Feed">

<!-- https://t.co/dKP3o1e -->
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script>
  document.documentElement.className = document.documentElement.className.replace(/\bno-js\b/g, '') + ' js ';
</script>

<!-- For all browsers -->
<link rel="stylesheet" href="/assets/css/main.css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5/css/all.min.css">

<!--[if IE]>
  <style>
    /* old IE unsupported flexbox fixes */
    .greedy-nav .site-title {
      padding-right: 3em;
    }
    .greedy-nav button {
      position: absolute;
      top: 0;
      right: 0;
      height: 100%;
    }
  </style>
<![endif]-->



    <!-- start custom head snippets -->

<!-- insert favicons. use https://realfavicongenerator.net/ -->

<!-- <script data-ad-client="ca-pub-8799681346916578" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script> -->

<!-- end custom head snippets -->


<meta name="google-site-verification" content="RT2u0cL3NCPK3ydcuewM50F8hvklo6JxBJGxu0zypiw" />
<!-- Yandex.Metrika counter -->
<script type="text/javascript">
    (function(m,e,t,r,i,k,a){
        m[i]=m[i]||function(){(m[i].a=m[i].a||[]).push(arguments)};
        m[i].l=1*new Date();
        for (var j = 0; j < document.scripts.length; j++) {if (document.scripts[j].src === r) { return; }}
        k=e.createElement(t),a=e.getElementsByTagName(t)[0],k.async=1,k.src=r,a.parentNode.insertBefore(k,a)
    })(window, document,'script','https://mc.yandex.ru/metrika/tag.js', 'ym');

    ym(95812963, 'init', {webvisor:true, clickmap:true, ecommerce:"dataLayer", accurateTrackBounce:true, trackLinks:true});
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/95812963" style="position:absolute; left:-9999px;" alt="" /></div></noscript>
<!-- /Yandex.Metrika counter -->
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=GT-TNPXBWRM"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'GT-TNPXBWRM');
</script>

<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-RWLWYNFRW0"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-RWLWYNFRW0');
</script>

<script>
gtag('set', 'user_data', {
"email": datainchi@gmail.com,
"phone_number": +6281289065249,
"address": {
"first_name": Iwan,
"last_name": Setiawan,
"street": Kp. Warung Bongkok RT. 002/01,
"city": Kabupaten Bekasi,
"region": Jawa Barat,
"postal_code": 17841,
"country": Indonesia
}
});
</script>

<!-- Google Tag Manager -->
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-N7TLZSRG');</script>
<!-- End Google Tag Manager -->



  </head>

  <body class="layout--single">

<!-- Google Tag Manager (noscript) -->
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-N7TLZSRG"
height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<!-- End Google Tag Manager (noscript) -->

    <nav class="skip-links">
  <h2 class="screen-reader-text">Skip links</h2>
  <ul>
    <li><a href="#site-nav" class="screen-reader-shortcut">Skip to primary navigation</a></li>
    <li><a href="#main" class="screen-reader-shortcut">Skip to content</a></li>
    <li><a href="#footer" class="screen-reader-shortcut">Skip to footer</a></li>
  </ul>
</nav>

    <!--[if lt IE 9]>
<div class="notice--danger align-center" style="margin: 0;">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience.</div>
<![endif]-->

    

<div class="masthead">
  <div class="masthead__inner-wrap">
    <div class="masthead__menu">
      <nav id="site-nav" class="greedy-nav">
        
        <a class="site-title" href="/">
          UnixBSDShell
          
        </a>
        <ul class="visible-links"><li class="masthead__menu-item">
              <a href="/about/">About</a>
            </li><li class="masthead__menu-item">
              <a href="/categories/">Posts by Category</a>
            </li><li class="masthead__menu-item">
              <a href="/year-archive/">Posts by Year</a>
            </li></ul>
        
        <button class="search__toggle" type="button">
          <span class="visually-hidden">Toggle search</span>
          <svg class="icon" width="16" height="16" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 15.99 16">
            <path d="M15.5,13.12L13.19,10.8a1.69,1.69,0,0,0-1.28-.55l-0.06-.06A6.5,6.5,0,0,0,5.77,0,6.5,6.5,0,0,0,2.46,11.59a6.47,6.47,0,0,0,7.74.26l0.05,0.05a1.65,1.65,0,0,0,.5,1.24l2.38,2.38A1.68,1.68,0,0,0,15.5,13.12ZM6.4,2A4.41,4.41,0,1,1,2,6.4,4.43,4.43,0,0,1,6.4,2Z" transform="translate(-.01)"></path>
          </svg>
        </button>
        
        <button class="greedy-nav__toggle hidden" type="button">
          <span class="visually-hidden">Toggle menu</span>
          <div class="navicon"></div>
        </button>
        <ul class="hidden-links hidden"></ul>
      </nav>
    </div>
  </div>
</div>


    <div class="initial-content">
      


  
    



<nav class="breadcrumbs">
  <ol itemscope itemtype="https://schema.org/BreadcrumbList">
    
    
    
      
        <li itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">
          <a href="https://unixwinbsd.site/" itemprop="item"><span itemprop="name">Home</span></a>
          <meta itemprop="position" content="1" />
        </li>
        <span class="sep">/</span>
      
      
        
        <li itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">
          <a href="/categories/#freebsd" itemprop="item"><span itemprop="name">Freebsd</span></a>
          <meta itemprop="position" content="2" />
        </li>
        <span class="sep">/</span>
      
    
      
      
        <li class="current">gpart Command To Manage Disk Partitions in FreeBSD - Part 2</li>
      
    
  </ol>
</nav>

  


<div id="main" role="main">
  
  <div class="sidebar sticky">
  


<div itemscope itemtype="https://schema.org/Person">

  
    <div class="author__avatar">
      
        <img src="/assets/images/pscustomobject.jpg" alt="UnixBSDShell's Blog" itemprop="image">
      
    </div>
  

  <div class="author__content">
    
      <h3 class="author__name" itemprop="name">UnixBSDShell's Blog</h3>
    
    
      <div class="author__bio" itemprop="description">
        <p>unixwinbsd.site is an online learning platform that provides online tutorials and videos about unix, FreeBSD, OpenBSD and Linux. Not only that, unixwinbsd.site also presents a variety of topics, including software development, programming, web design, and more. This blog provides various online tutorials and videos for beginners and experienced professionals. This blog also provides a Q&amp;A forum for users to ask questions and get help from other members.</p>

      </div>
    
  </div>

  <div class="author__urls-wrapper">
    <button class="btn btn--inverse">Follow</button>
    <ul class="author__urls social-icons">
      
        <li itemprop="homeLocation" itemscope itemtype="https://schema.org/Place">
          <i class="fas fa-fw fa-map-marker-alt" aria-hidden="true"></i> <span itemprop="name">Moscow, Russia</span>
        </li>
      

      
        
          
            <li><a href="https://github.com/unixwinbsd/unixwinbsd.github.io" rel="nofollow noopener noreferrer"><i class="fas fa-fw fa-link" aria-hidden="true"></i><span class="label">Website</span></a></li>
          
        
          
            <li><a href="https://github.com/unixwinbsd/unixwinbsd.github.io" rel="nofollow noopener noreferrer"><i class="fas fa-fw fa-link" aria-hidden="true"></i><span class="label">DevOps Notes</span></a></li>
          
        
          
            <li><a href="https://www.linkedin.com/in/iwan-setiawan-943659164/" rel="nofollow noopener noreferrer"><i class="fab fa-fw fa-linkedin" aria-hidden="true"></i><span class="label">LinkedIn</span></a></li>
          
        
          
            <li><a href="https://github.com/unixwinbsd/unixwinbsd.github.io" rel="nofollow noopener noreferrer"><i class="fab fa-fw fa-github" aria-hidden="true"></i><span class="label">GitHub</span></a></li>
          
        
      

      

      
        <li>
          <a href="mailto:iwanse1212@yandex.com">
            <meta itemprop="email" content="iwanse1212@yandex.com" />
            <i class="fas fa-fw fa-envelope-square" aria-hidden="true"></i><span class="label">Email</span>
          </a>
        </li>
      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      <!--
  <li>
    <a href="http://link-to-whatever-social-network.com/user/" itemprop="sameAs" rel="nofollow noopener noreferrer">
      <i class="fas fa-fw" aria-hidden="true"></i> Custom Social Profile Link
    </a>
  </li>
-->
    </ul>
  </div>
</div>

  
  </div>



  <article class="page" itemscope itemtype="https://schema.org/CreativeWork">
    <meta itemprop="headline" content="gpart Command To Manage Disk Partitions in FreeBSD - Part 2">
    <meta itemprop="description" content="Instead, FreeBSD has established the gpart command as the default command for managing and organizing disks. This command is incredibly capable of managing partitions on the latest hard drives, up to terabytes in size. In fact, gpart can create, modify, and delete partitions very effectively and quickly">
    <meta itemprop="datePublished" content="2025-07-18T11:11:21+03:00">
    

    <div class="page__inner-wrap">
      
        <header>
          <h1 id="page-title" class="page__title" itemprop="headline">gpart Command To Manage Disk Partitions in FreeBSD - Part 2
</h1>
          

  <p class="page__meta">
    

    

    
      
      

      <span class="page__meta-readtime">
        <i class="far fa-clock" aria-hidden="true"></i>
        
          7 minute read
        
      </span>
    
  </p>


        </header>
      

      <section class="page__content" itemprop="text">
        
          <aside class="sidebar__right sticky">
            <nav class="toc">
              <header><h4 class="nav__title"><i class="fas fa-file-alt"></i> On this page</h4></header>
              <ul class="toc__menu">
  <li><a href="#g-modifying-partition-attributes---gpart-modify">g. Modifying Partition Attributes - gpart modify</a>
    <ul>
      <li><a href="#g1-changing-partition-labels">g.1. Changing Partition Labels</a></li>
      <li><a href="#g2-changing-partition-type">g.2. Changing Partition Type</a></li>
    </ul>
  </li>
  <li><a href="#h-changing-partition-size---gpart-resize">h. Changing Partition Size - gpart resize</a></li>
  <li><a href="#i-installing-boot-code-to-a-partition---gpart-bootcode">i. Installing Boot Code to a Partition - gpart bootcode</a></li>
  <li><a href="#j-creating-a-backup-partition---gpart-backup">j. Creating a Backup Partition - gpart backup</a></li>
  <li><a href="#k-recovering-a-partition---gpart-restore">k. Recovering a Partition - gpart restore</a>
    <ul>
      <li><a href="#k1-delete-partition">k.1. Delete Partition</a></li>
      <li><a href="#k2-create-a-table-of-partition-schemes-and-partition-types">k.2. Create a table of partition schemes and partition types.</a></li>
      <li><a href="#k3-create-a-backup-partition">k.3. Create a Backup Partition</a></li>
      <li><a href="#k4-delete-partition">k.4. Delete Partition</a></li>
      <li><a href="#k5-recover-partition">k.5. Recover Partition</a></li>
    </ul>
  </li>
</ul>

            </nav>
          </aside>
        
        <p>This article is a continuation of the previous section. In this article, we’ll explore other gpart commands. To help you learn gpart easily, I recommend reading the previous article. If you want a deeper understanding of gpart and other commands, I recommend reading the book I wrote. <a href="https://ko-fi.com/s/03a3074217">The FreeBSD Handbook - System Administrator</a>.</p>

<p>In the previous article, at point <code class="language-plaintext highlighter-rouge">"C"</code> the gpart command was discussed up to point <code class="language-plaintext highlighter-rouge">"f"</code> In this article, we’ll start at point <code class="language-plaintext highlighter-rouge">"g"</code>.</p>

<h3 id="g-modifying-partition-attributes---gpart-modify">g. Modifying Partition Attributes - gpart modify</h3>

<p>The <code class="language-plaintext highlighter-rouge">gpart modify</code> command can only change the partition type and partition label. To change the partition type and label, you must specify the partition with the -i (index) option.</p>

<p>To use each gpart modify option, see the table below:</p>

<table>
  <thead>
    <tr>
      <th>Flags</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>-f flags</td>
      <td>Additional operational flags. See the section titled “OPERATIONAL FLAGS” below for a discussion of their use.</td>
    </tr>
    <tr>
      <td>-i index</td>
      <td>Specifies the partition index to be modified.</td>
    </tr>
    <tr>
      <td>-l label</td>
      <td>Change partition label to label.</td>
    </tr>
    <tr>
      <td>-t type</td>
      <td>Change the partition type to type.</td>
    </tr>
  </tbody>
</table>

<p>In the table above, we can see that the gpart modify command can only execute the -l and -t options in conjunction with the -i option.</p>

<h4 id="g1-changing-partition-labels">g.1. Changing Partition Labels</h4>

<p>In the example below, we’ll show you how to change the label of a hard disk.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>root@ns4:~ # gpart show -l ada0
=&gt;       40  488397088  ada0  GPT  (233G)
         40       1024     1  gptboot0  (512K)
       1064        984        - free -  (492K)
       2048    4194304     2  swap0  (2.0G)
    4196352  484200448     3  zfs0  (231G)
  488396800        328        - free -  (164K)
</code></pre></div></div>

<p>Note the message displayed by the gpart show command. The information above explains that the hard disk label name is <code class="language-plaintext highlighter-rouge">"zfs0"</code> with index 3. We will change this label name to “hard-disk-1” with the gpart modify command, as shown below.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>root@ns4:~ # gpart modify -i 3 -l hard-disk-1 ada0
ada0p3 modified
</code></pre></div></div>

<p>After you change the label name to hard-disk-1, run the gpart show command to see whether the label name has been changed or not.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>root@ns4:~ # gpart show -l ada0
=&gt;       40  488397088  ada0  GPT  (233G)
         40       1024     1  gptboot0  (512K)
       1064        984        - free -  (492K)
       2048    4194304     2  swap0  (2.0G)
    4196352  484200448     3  hard-disk-1  (231G)
  488396800        328        - free -  (164K)
</code></pre></div></div>

<p>In the command above we can see, the label name <code class="language-plaintext highlighter-rouge">"zfs0"</code> has been changed to <code class="language-plaintext highlighter-rouge">"hard-disk-1"</code>.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>root@ns4:~ # diskinfo /dev/gpt/namalabel
/dev/gpt/namalabel      512     2147483648      4194304 0       1048576 261     255     63
</code></pre></div></div>

<h4 id="g2-changing-partition-type">g.2. Changing Partition Type</h4>

<p>With gpart modify, you can also change the partition type of a hard disk. You can change the type of an existing partition; see the partitions on a flash drive below.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>root@ns4:~ # gpart show da0
=&gt;      40  30834608  da0  GPT  (15G)
        40      2008       - free -  (1.0M)
      2048  14680064    1  freebsd-ufs  (7.0G)
  14682112   2097152    2  freebsd-ufs  (1.0G)
  16779264   4194304    3  freebsd-ufs  (2.0G)
  20973568   9861080       - free -  (4.7G)
</code></pre></div></div>

<p>There are three types of partitions: freebsd-ufs with index numbers 1, 2, and 3. Since you want to create a swap file, we’ll convert one of the freebsd-ufs partitions to a swap partition. For example, we’ll convert index number 2 to swap. To do this, simply run the command below.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>root@ns4:~ # gpart modify -i 2 -t freebsd-swap da0
da0p2 modified
</code></pre></div></div>

<p>Now let’s see the changes from the above command with gpart show.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>root@ns4:~ # gpart show da0
=&gt;      40  30834608  da0  GPT  (15G)
        40      2008       - free -  (1.0M)
      2048  14680064    1  freebsd-ufs  (7.0G)
  14682112   2097152    2  freebsd-swap  (1.0G)
  16779264   4194304    3  freebsd-ufs  (2.0G)
  20973568   9861080       - free -  (4.7G)
</code></pre></div></div>

<h3 id="h-changing-partition-size---gpart-resize">h. Changing Partition Size - gpart resize</h3>

<p>Each partition has a predefined size, but you can resize it as desired. You can use the gpart resize command to resize an existing partition on a disk.</p>

<p>As always, before running the gpart command, check the currently active partition.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>root@ns4:~ # gpart show da0
=&gt;      40  30834608  da0  GPT  (15G)
        40       512    1  freebsd-boot  (256K)
       552   2097152    2  freebsd-swap  (1.0G)
   2097704  12582912    3  freebsd-ufs  (6.0G)
  14680616  16154032       - free -  (7.7G)
</code></pre></div></div>

<p>In the command above, there is about 7.7G of free space at the end of the disk. Since partitions can only be resized to contiguous chunks of space, to resize the second partition (the root partition), we need to delete the third partition (which is safe because the swap partition only holds temporary data), resize the second partition, and then recreate the swap partition.</p>

<p>If you have enabled swap with the command <code class="language-plaintext highlighter-rouge">"swapon /dev/da0"</code> first disable the swap file on <code class="language-plaintext highlighter-rouge">da0</code>.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>root@ns4:~ # swapoff /dev/da0
</code></pre></div></div>

<p>The next step is to delete the swap partition. Since the swap file is located at index number 2, you’ll delete it with the <code class="language-plaintext highlighter-rouge">gpart delete</code> command.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>root@ns4:~ # gpart delete -i 2 /dev/da0
</code></pre></div></div>
<p>See the changes from the swap partition deletion command.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>root@ns4:~ # gpart show /dev/da0
=&gt;      40  30834608  da0  GPT  (15G)
        40       512    1  freebsd-boot  (256K)
       552   2097152       - free -  (1.0G)
   2097704  12582912    3  freebsd-ufs  (6.0G)
  14680616  16154032       - free -  (7.7G)
</code></pre></div></div>

<p>Next, we’ll resize the freebsd-ufs partition to 12G. Note the index number of the freebsd-ufs partition. To resize the freebsd-ufs partition from 6.0G to 12G, run the command below.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>root@ns4:~ # gpart resize -i 3 -s 12G -a 4k da0
da0p3 resized
</code></pre></div></div>

<p>As usual, view the results with the gpart show command.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>root@ns4:~ # gpart show da0
=&gt;      40  30834608  da0  GPT  (15G)
        40       512    1  freebsd-boot  (256K)
       552   2097152       - free -  (1.0G)
   2097704  25165824    3  freebsd-ufs  (12G)
  27263528   3571120       - free -  (1.7G)
</code></pre></div></div>

<p>The command above shows that there’s still 1.7G of free space. We’ll use the remaining space to store the swap file. To create a swap partition, run the following command.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>root@ns4:~ # gpart add -t freebsd-swap -a 4k da0
da0p2 added
</code></pre></div></div>

<h3 id="i-installing-boot-code-to-a-partition---gpart-bootcode">i. Installing Boot Code to a Partition - gpart bootcode</h3>

<p>To install boot code to the partition scheme metadata on a disk, use the gpart bootcode command. For example, to install GPT boot code on da0, use:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>root@ns4:~ # gpart bootcode -b /boot/pmbr -p /boot/gptboot -i 1 da0
partcode written to da0p1
bootcode written to da0
</code></pre></div></div>
<p>The above command will install the GPT boot code on the first partition (index 1) on disk da0. The -b option specifies the PMBR (Protective MBR) boot code, and the -p option specifies the GPT boot code.</p>

<p>If you want to use the ZFS boot code, replace gptboot with gptzfsboot.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>root@ns4:~ # gpart bootcode -b /boot/pmbr -p /boot/gptzfsboot -i 1 da0
partcode written to da0p1
bootcode written to da0
</code></pre></div></div>

<h3 id="j-creating-a-backup-partition---gpart-backup">j. Creating a Backup Partition - gpart backup</h3>

<p>Creating a backup partition is crucial to prevent system failure. With a backup partition, we can easily recover damaged or lost partitions.</p>

<p>You can create a backup partition with the gpart backup command. This command displays partition table information in a special text format. You can redirect this information to a file or pass it to the “gpart restore” command to restore the partition.</p>

<p>Here is a simple gpart backup command.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>root@ns4:~ # gpart backup ada0
GPT 128
1   freebsd-boot        40      1024 gptboot0
2   freebsd-swap      2048   4194304 swap0
3    freebsd-zfs   4196352 484200448 zfs0
</code></pre></div></div>

<p>To ensure the gpart backup command works optimally during recovery, it’s recommended to create a dedicated file for the backup partition, as shown in the example below.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>root@ns4:~ # gpart backup da0 &gt; /mnt/da0.backup
</code></pre></div></div>

<h3 id="k-recovering-a-partition---gpart-restore">k. Recovering a Partition - gpart restore</h3>

<p>If you accidentally destroy a GPT partition table, you still have several options for recovering it. Make sure you’ve backed up your partition with the gpart backup command; otherwise, you’ll have more work to do.</p>

<p>Now, if you’ve previously backed up your partition table using the gpart backup command, you’re in luck, and it will likely only take a few shell commands to get your system back to normal.</p>

<p>We’ll provide an example of running the gpart restore command to restore a deleted partition. Follow each command as we demonstrate.</p>

<h4 id="k1-delete-partition">k.1. Delete Partition</h4>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>root@ns4:~ # gpart destroy -F /dev/da0
</code></pre></div></div>

<h4 id="k2-create-a-table-of-partition-schemes-and-partition-types">k.2. Create a table of partition schemes and partition types.</h4>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>root@ns4:~ # gpart create -s gpt da0
root@ns4:~ # gpart add -s 64k -t freebsd-boot da0
root@ns4:~ # gpart add -s 6G -t freebsd-ufs da0
root@ns4:~ # gpart add -t freebsd-swap da0
root@ns4:~ # gpart bootcode -b /boot/pmbr -p /boot/gptboot -i 1 da0
</code></pre></div></div>
<p>Now you can see the contents of the partitions on disk da0.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>root@ns4:~ # gpart show da0
=&gt;      40  30834608  da0  GPT  (15G)
        40       128    1  freebsd-boot  (64K)
       168  12582912    2  freebsd-ufs  (6.0G)
  12583080  18251568    3  freebsd-swap  (8.7G)
</code></pre></div></div>

<p>The commands above are exactly the same as the default FreeBSD installation settings.</p>

<ul>
  <li>The first partition should be freebsd-boot and will most likely be 64k in size.</li>
  <li>The second partition is the root partition (freebsd-ufs).</li>
  <li>The third partition is the swap partition (freebsd-swap).</li>
  <li>The other partitions depend on your configuration.</li>
</ul>

<h4 id="k3-create-a-backup-partition">k.3. Create a Backup Partition</h4>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>root@ns4:~ # gpart backup da0 &gt; /mnt/da0.backup
</code></pre></div></div>

<h4 id="k4-delete-partition">k.4. Delete Partition</h4>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>root@ns4:~ # gpart destroy -F /dev/da0
</code></pre></div></div>

<h4 id="k5-recover-partition">k.5. Recover Partition</h4>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>root@ns4:~ # gpart restore -F da0 &lt; /mnt/da0.backup
</code></pre></div></div>
<p>In the restore command, the -F option will first completely wipe the partition table of data, then restore it from the file.</p>

<p>The main gpart commands, found in man gpart, are discussed in detail. Simply learn each command. If you have difficulty understanding the gpart commands, please leave a comment or visit the official gpart website.</p>

        
      </section>

      <footer class="page__meta">
        
        
  


  
  
  

  <p class="page__taxonomy">
    <strong><i class="fas fa-fw fa-tags" aria-hidden="true"></i> Tags: </strong>
    <span itemprop="keywords">
    
      
      
      <a href="/tags/#unixshell" class="page__taxonomy-item" rel="tag">UnixShell</a>
    
    </span>
  </p>




  


  
  
  

  <p class="page__taxonomy">
    <strong><i class="fas fa-fw fa-folder-open" aria-hidden="true"></i> Categories: </strong>
    <span itemprop="keywords">
    
      
      
      <a href="/categories/#freebsd" class="page__taxonomy-item" rel="tag">FreeBSD</a>
    
    </span>
  </p>


        
  <p class="page__date"><strong><i class="fas fa-fw fa-calendar-alt" aria-hidden="true"></i> Updated:</strong> <time datetime="2025-07-18T11:11:21+03:00">July 18, 2025</time></p>


      </footer>

      <section class="page__share">
  

  <a href="https://twitter.com/intent/tweet?via=iwanset96143401&text=gpart+Command+To+Manage+Disk+Partitions+in+FreeBSD+-+Part+2%20https%3A%2F%2Funixwinbsd.site%2Ffreebsd%2Fgpart-command-manage-disk-partition-freebsd-2%2F" class="btn btn--twitter" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" title="Share on Twitter"><i class="fab fa-fw fa-twitter" aria-hidden="true"></i><span> Twitter</span></a>

  <a href="https://www.facebook.com/sharer/sharer.php?u=https%3A%2F%2Funixwinbsd.site%2Ffreebsd%2Fgpart-command-manage-disk-partition-freebsd-2%2F" class="btn btn--facebook" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" title="Share on Facebook"><i class="fab fa-fw fa-facebook" aria-hidden="true"></i><span> Facebook</span></a>

  <a href="https://www.linkedin.com/shareArticle?mini=true&url=https%3A%2F%2Funixwinbsd.site%2Ffreebsd%2Fgpart-command-manage-disk-partition-freebsd-2%2F" class="btn btn--linkedin" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" title="Share on LinkedIn"><i class="fab fa-fw fa-linkedin" aria-hidden="true"></i><span> LinkedIn</span></a>
</section>


      
  <nav class="pagination">
    
      <a href="/freebsd/gpart-command-manage-disk-partition-freebsd/" class="pagination--pager" title="gpart Command To Manage Disk Partitions in FreeBSD - Part 1
">Previous</a>
    
    
      <a href="/freebsd/freebsd-quota-limiting-hdd-by-user-group/" class="pagination--pager" title="Setup FreeBSD Quota for Limiting HDD Space Usage by Users or Groups
">Next</a>
    
  </nav>

    </div>

    
  </article>

  
  
    <div class="page__related">
      <h4 class="page__related-title">You May Also Enjoy</h4>
      <div class="grid__wrapper">
        
          



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
    <h2 class="archive__item-title no_toc" itemprop="headline">
      
        <a href="/freebsd/installation-java-development-kit-on-freebsd/" rel="permalink">Installing and Using the Java Development Kit on FreeBSD
</a>
      
    </h2>
    

  <p class="page__meta">
    

    

    
      
      

      <span class="page__meta-readtime">
        <i class="far fa-clock" aria-hidden="true"></i>
        
          8 minute read
        
      </span>
    
  </p>


    <p class="archive__item-excerpt" itemprop="description">Redmine is open source software or application that uses the Ruby On Rails Framework. Redmine is a project management or project tracking application which r...</p>
  </article>
</div>

        
          



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
    <h2 class="archive__item-title no_toc" itemprop="headline">
      
        <a href="/freebsd/how-to-install-webmin-on-freebsd-machine/" rel="permalink">How to Install Webmin on a FreeBSD System
</a>
      
    </h2>
    

  <p class="page__meta">
    

    

    
      
      

      <span class="page__meta-readtime">
        <i class="far fa-clock" aria-hidden="true"></i>
        
          3 minute read
        
      </span>
    
  </p>


    <p class="archive__item-excerpt" itemprop="description">Webmin is a web-based system administration tool for Unix-like servers, and a service with approximately 1,000,000 annual installations worldwide
</p>
  </article>
</div>

        
          



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
    <h2 class="archive__item-title no_toc" itemprop="headline">
      
        <a href="/freebsd/configuration-radicale-caldav-cardavv-server-freebsd/" rel="permalink">How to Configure FreeBSD with Radicale CalDAV CardDAV Server
</a>
      
    </h2>
    

  <p class="page__meta">
    

    

    
      
      

      <span class="page__meta-readtime">
        <i class="far fa-clock" aria-hidden="true"></i>
        
          4 minute read
        
      </span>
    
  </p>


    <p class="archive__item-excerpt" itemprop="description">Radicale is run with the help of the Apache or NGINX web server, so it can be operated either as a standalone package using its internal http/https server or...</p>
  </article>
</div>

        
          



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
    <h2 class="archive__item-title no_toc" itemprop="headline">
      
        <a href="/freebsd/setup-mirror-site-convert-pkg-package-freebsd/" rel="permalink">Setting up a Mirror Site to convert PKG Packages on FreeBSD
</a>
      
    </h2>
    

  <p class="page__meta">
    

    

    
      
      

      <span class="page__meta-readtime">
        <i class="far fa-clock" aria-hidden="true"></i>
        
          4 minute read
        
      </span>
    
  </p>


    <p class="archive__item-excerpt" itemprop="description">PKG packages on FreeBSD contain pre-compiled software packages – called packages. This is the easiest way to install additional software under TwinCAT/BSD or...</p>
  </article>
</div>

        
      </div>
    </div>
  
  
</div>

    </div>

    
      <div class="search-content">
        <div class="search-content__inner-wrap"><form class="search-content__form" onkeydown="return event.key != 'Enter';">
    <label class="sr-only" for="search">
      Enter your search term...
    </label>
    <input type="search" id="search" class="search-input" tabindex="-1" placeholder="Enter your search term..." />
  </form>
  <div id="results" class="results"></div></div>

      </div>
    

    <div id="footer" class="page__footer">
      <footer>
        <!-- start custom footer snippets -->

<!-- end custom footer snippets -->
        <div class="page__footer-follow">
  <ul class="social-icons">
    

    
      
        
          <li><a href="https://github.com/unixwinbsd/unixwinbsd.github.io" rel="nofollow noopener noreferrer"><i class="fab fa-fw fa-github" aria-hidden="true"></i> GitHub</a></li>
        
      
        
          <li><a href="https://www.linkedin.com/in/catanesi/" rel="nofollow noopener noreferrer"><i class="fab fa-fw fa-linkedin" aria-hidden="true"></i> LinkedIn Profile</a></li>
        
      
        
          <li><a href="https://github.com/unixwinbsd/unixwinbsd.github.io" rel="nofollow noopener noreferrer"><i class="fas fa-fw fa-link" aria-hidden="true"></i> Website</a></li>
        
      
    

    <li><a href="/feed.xml"><i class="fas fa-fw fa-rss-square" aria-hidden="true"></i> Feed</a></li>
  </ul>
</div>

<div class="page__footer-copyright">&copy; 2025 UnixBSDShell Blog. Powered by <a href="https://jekyllrb.com" rel="nofollow">Jekyll</a> &amp; <a href="https://mademistakes.com/work/minimal-mistakes-jekyll-theme/" rel="nofollow">Minimal Mistakes</a>.</div>

      </footer>
    </div>

    
  <script src="/assets/js/main.min.js"></script>




<script src="/assets/js/lunr/lunr.min.js"></script>
<script src="/assets/js/lunr/lunr-store.js"></script>
<script src="/assets/js/lunr/lunr-en.js"></script>




    
  <script>
    var disqus_config = function () {
      this.page.url = "https://unixwinbsd.site/freebsd/gpart-command-manage-disk-partition-freebsd-2/";  /* Replace PAGE_URL with your page's canonical URL variable */
      this.page.identifier = "/freebsd/gpart-command-manage-disk-partition-freebsd-2"; /* Replace PAGE_IDENTIFIER with your page's unique identifier variable */
    };
    (function() { /* DON'T EDIT BELOW THIS LINE */
      var d = document, s = d.createElement('script');
      s.src = 'https://UnixBSDShell.disqus.com/embed.js';
      s.setAttribute('data-timestamp', +new Date());
      (d.head || d.body).appendChild(s);
    })();
  </script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>


  







  </body>
</html>
