<!doctype html>
<!--
  Minimal Mistakes Jekyll Theme 4.20.2 by Michael Rose
  Copyright 2013-2020 Michael Rose - mademistakes.com | @mmistakes
  Free for personal and commercial use under the MIT license
  https://github.com/mmistakes/minimal-mistakes/blob/master/LICENSE
-->
<html lang="en" class="no-js">
  <head>
    <meta charset="utf-8">

<!-- begin _includes/seo.html --><title>PowerDNS Admin Installation Process on Ubuntu - UnixBSDShell</title>
<meta name="description" content="PowerDNS-Admin is a web-based interface for managing PowerDNS DNS servers. It allows users to manage DNS zones and records through an easy-to-use web interface. The interface is written in Python and uses the Flask framework and a SQL database to store data">


  <meta name="author" content="UnixBSDShell's Blog">
  
  <meta property="article:author" content="UnixBSDShell's Blog">
  


<meta property="og:type" content="article">
<meta property="og:locale" content="en_US">
<meta property="og:site_name" content="UnixBSDShell">
<meta property="og:title" content="PowerDNS Admin Installation Process on Ubuntu">
<meta property="og:url" content="https://unixwinbsd.site/linux/installation-powerdns-admin-nginx-ubuntu/">


  <meta property="og:description" content="PowerDNS-Admin is a web-based interface for managing PowerDNS DNS servers. It allows users to manage DNS zones and records through an easy-to-use web interface. The interface is written in Python and uses the Flask framework and a SQL database to store data">





  <meta name="twitter:site" content="@iwanset96143401">
  <meta name="twitter:title" content="PowerDNS Admin Installation Process on Ubuntu">
  <meta name="twitter:description" content="PowerDNS-Admin is a web-based interface for managing PowerDNS DNS servers. It allows users to manage DNS zones and records through an easy-to-use web interface. The interface is written in Python and uses the Flask framework and a SQL database to store data">
  <meta name="twitter:url" content="https://unixwinbsd.site/linux/installation-powerdns-admin-nginx-ubuntu/">

  
    <meta name="twitter:card" content="summary">
    
  

  



  <meta property="article:published_time" content="2025-07-16T09:57:32+03:00">





  

  


<link rel="canonical" href="https://unixwinbsd.site/linux/installation-powerdns-admin-nginx-ubuntu/">




<script type="application/ld+json">
  {
    "@context": "https://schema.org",
    
      "@type": "Person",
      "name": "UnixBSDShell Blog",
      "url": "https://unixwinbsd.site/"
    
  }
</script>


  <meta name="google-site-verification" content="googledc9be5e5382da4fd" />


  <meta name="msvalidate.01" content="BCDF1444D895EBA62C6422C90DF8EA1C">



  <meta name="yandex-verification" content="69d778baa1dbd371">


<!-- end _includes/seo.html -->


<link href="/feed.xml" type="application/atom+xml" rel="alternate" title="UnixBSDShell Feed">

<!-- https://t.co/dKP3o1e -->
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script>
  document.documentElement.className = document.documentElement.className.replace(/\bno-js\b/g, '') + ' js ';
</script>

<!-- For all browsers -->
<link rel="stylesheet" href="/assets/css/main.css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5/css/all.min.css">

<!--[if IE]>
  <style>
    /* old IE unsupported flexbox fixes */
    .greedy-nav .site-title {
      padding-right: 3em;
    }
    .greedy-nav button {
      position: absolute;
      top: 0;
      right: 0;
      height: 100%;
    }
  </style>
<![endif]-->



    <!-- start custom head snippets -->

<!-- insert favicons. use https://realfavicongenerator.net/ -->

<!-- <script data-ad-client="ca-pub-8799681346916578" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script> -->

<!-- end custom head snippets -->


<meta name="google-site-verification" content="RT2u0cL3NCPK3ydcuewM50F8hvklo6JxBJGxu0zypiw" />
<!-- Yandex.Metrika counter -->
<script type="text/javascript">
    (function(m,e,t,r,i,k,a){
        m[i]=m[i]||function(){(m[i].a=m[i].a||[]).push(arguments)};
        m[i].l=1*new Date();
        for (var j = 0; j < document.scripts.length; j++) {if (document.scripts[j].src === r) { return; }}
        k=e.createElement(t),a=e.getElementsByTagName(t)[0],k.async=1,k.src=r,a.parentNode.insertBefore(k,a)
    })(window, document,'script','https://mc.yandex.ru/metrika/tag.js', 'ym');

    ym(95812963, 'init', {webvisor:true, clickmap:true, ecommerce:"dataLayer", accurateTrackBounce:true, trackLinks:true});
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/95812963" style="position:absolute; left:-9999px;" alt="" /></div></noscript>
<!-- /Yandex.Metrika counter -->
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=GT-TNPXBWRM"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'GT-TNPXBWRM');
</script>

<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-RWLWYNFRW0"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-RWLWYNFRW0');
</script>

<script>
gtag('set', 'user_data', {
"email": datainchi@gmail.com,
"phone_number": +6281289065249,
"address": {
"first_name": Iwan,
"last_name": Setiawan,
"street": Kp. Warung Bongkok RT. 002/01,
"city": Kabupaten Bekasi,
"region": Jawa Barat,
"postal_code": 17841,
"country": Indonesia
}
});
</script>

<!-- Google Tag Manager -->
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-N7TLZSRG');</script>
<!-- End Google Tag Manager -->



  </head>

  <body class="layout--single">

<!-- Google Tag Manager (noscript) -->
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-N7TLZSRG"
height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<!-- End Google Tag Manager (noscript) -->

    <nav class="skip-links">
  <h2 class="screen-reader-text">Skip links</h2>
  <ul>
    <li><a href="#site-nav" class="screen-reader-shortcut">Skip to primary navigation</a></li>
    <li><a href="#main" class="screen-reader-shortcut">Skip to content</a></li>
    <li><a href="#footer" class="screen-reader-shortcut">Skip to footer</a></li>
  </ul>
</nav>

    <!--[if lt IE 9]>
<div class="notice--danger align-center" style="margin: 0;">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience.</div>
<![endif]-->

    

<div class="masthead">
  <div class="masthead__inner-wrap">
    <div class="masthead__menu">
      <nav id="site-nav" class="greedy-nav">
        
        <a class="site-title" href="/">
          UnixBSDShell
          
        </a>
        <ul class="visible-links"><li class="masthead__menu-item">
              <a href="/about/">About</a>
            </li><li class="masthead__menu-item">
              <a href="/categories/">Posts by Category</a>
            </li><li class="masthead__menu-item">
              <a href="/year-archive/">Posts by Year</a>
            </li></ul>
        
        <button class="search__toggle" type="button">
          <span class="visually-hidden">Toggle search</span>
          <svg class="icon" width="16" height="16" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 15.99 16">
            <path d="M15.5,13.12L13.19,10.8a1.69,1.69,0,0,0-1.28-.55l-0.06-.06A6.5,6.5,0,0,0,5.77,0,6.5,6.5,0,0,0,2.46,11.59a6.47,6.47,0,0,0,7.74.26l0.05,0.05a1.65,1.65,0,0,0,.5,1.24l2.38,2.38A1.68,1.68,0,0,0,15.5,13.12ZM6.4,2A4.41,4.41,0,1,1,2,6.4,4.43,4.43,0,0,1,6.4,2Z" transform="translate(-.01)"></path>
          </svg>
        </button>
        
        <button class="greedy-nav__toggle hidden" type="button">
          <span class="visually-hidden">Toggle menu</span>
          <div class="navicon"></div>
        </button>
        <ul class="hidden-links hidden"></ul>
      </nav>
    </div>
  </div>
</div>


    <div class="initial-content">
      


  
    



<nav class="breadcrumbs">
  <ol itemscope itemtype="https://schema.org/BreadcrumbList">
    
    
    
      
        <li itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">
          <a href="https://unixwinbsd.site/" itemprop="item"><span itemprop="name">Home</span></a>
          <meta itemprop="position" content="1" />
        </li>
        <span class="sep">/</span>
      
      
        
        <li itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">
          <a href="/categories/#linux" itemprop="item"><span itemprop="name">Linux</span></a>
          <meta itemprop="position" content="2" />
        </li>
        <span class="sep">/</span>
      
    
      
      
        <li class="current">PowerDNS Admin Installation Process on Ubuntu</li>
      
    
  </ol>
</nav>

  


<div id="main" role="main">
  
  <div class="sidebar sticky">
  


<div itemscope itemtype="https://schema.org/Person">

  
    <div class="author__avatar">
      
        <img src="/assets/images/pscustomobject.jpg" alt="UnixBSDShell's Blog" itemprop="image">
      
    </div>
  

  <div class="author__content">
    
      <h3 class="author__name" itemprop="name">UnixBSDShell's Blog</h3>
    
    
      <div class="author__bio" itemprop="description">
        <p>unixwinbsd.site is an online learning platform that provides online tutorials and videos about unix, FreeBSD, OpenBSD and Linux. Not only that, unixwinbsd.site also presents a variety of topics, including software development, programming, web design, and more. This blog provides various online tutorials and videos for beginners and experienced professionals. This blog also provides a Q&amp;A forum for users to ask questions and get help from other members.</p>

      </div>
    
  </div>

  <div class="author__urls-wrapper">
    <button class="btn btn--inverse">Follow</button>
    <ul class="author__urls social-icons">
      
        <li itemprop="homeLocation" itemscope itemtype="https://schema.org/Place">
          <i class="fas fa-fw fa-map-marker-alt" aria-hidden="true"></i> <span itemprop="name">Moscow, Russia</span>
        </li>
      

      
        
          
            <li><a href="https://github.com/unixwinbsd/unixwinbsd.github.io" rel="nofollow noopener noreferrer"><i class="fas fa-fw fa-link" aria-hidden="true"></i><span class="label">Website</span></a></li>
          
        
          
            <li><a href="https://github.com/unixwinbsd/unixwinbsd.github.io" rel="nofollow noopener noreferrer"><i class="fas fa-fw fa-link" aria-hidden="true"></i><span class="label">DevOps Notes</span></a></li>
          
        
          
            <li><a href="https://www.linkedin.com/in/iwan-setiawan-943659164/" rel="nofollow noopener noreferrer"><i class="fab fa-fw fa-linkedin" aria-hidden="true"></i><span class="label">LinkedIn</span></a></li>
          
        
          
            <li><a href="https://github.com/unixwinbsd/unixwinbsd.github.io" rel="nofollow noopener noreferrer"><i class="fab fa-fw fa-github" aria-hidden="true"></i><span class="label">GitHub</span></a></li>
          
        
      

      

      
        <li>
          <a href="mailto:iwanse1212@yandex.com">
            <meta itemprop="email" content="iwanse1212@yandex.com" />
            <i class="fas fa-fw fa-envelope-square" aria-hidden="true"></i><span class="label">Email</span>
          </a>
        </li>
      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      <!--
  <li>
    <a href="http://link-to-whatever-social-network.com/user/" itemprop="sameAs" rel="nofollow noopener noreferrer">
      <i class="fas fa-fw" aria-hidden="true"></i> Custom Social Profile Link
    </a>
  </li>
-->
    </ul>
  </div>
</div>

  
  </div>



  <article class="page" itemscope itemtype="https://schema.org/CreativeWork">
    <meta itemprop="headline" content="PowerDNS Admin Installation Process on Ubuntu">
    <meta itemprop="description" content="PowerDNS-Admin is a web-based interface for managing PowerDNS DNS servers. It allows users to manage DNS zones and records through an easy-to-use web interface. The interface is written in Python and uses the Flask framework and a SQL database to store data">
    <meta itemprop="datePublished" content="2025-07-16T09:57:32+03:00">
    

    <div class="page__inner-wrap">
      
        <header>
          <h1 id="page-title" class="page__title" itemprop="headline">PowerDNS Admin Installation Process on Ubuntu
</h1>
          

  <p class="page__meta">
    

    

    
      
      

      <span class="page__meta-readtime">
        <i class="far fa-clock" aria-hidden="true"></i>
        
          10 minute read
        
      </span>
    
  </p>


        </header>
      

      <section class="page__content" itemprop="text">
        
          <aside class="sidebar__right sticky">
            <nav class="toc">
              <header><h4 class="nav__title"><i class="fas fa-file-alt"></i> On this page</h4></header>
              <ul class="toc__menu">
  <li><a href="#1-system-requirements">1. System Requirements</a></li>
  <li><a href="#2-about-powerdns-admin">2. About PowerDNS Admin</a></li>
  <li><a href="#3-database">3. Database</a></li>
  <li><a href="#4-powerdns-admin-installation-process">4. PowerDNS Admin Installation Process</a></li>
  <li><a href="#5-powerdns-admin-configuration-process">5. PowerDNS Admin Configuration Process</a>
    <ul>
      <li><a href="#a-basic-settings">a. Basic Settings</a></li>
      <li><a href="#b-connection-to-the-database">b. Connection to the database</a></li>
      <li><a href="#c-disable-ldap-connection">c. Disable LDAP Connection</a></li>
      <li><a href="#d-powerdns-api-server-connection">d. PowerDNS API Server Connection</a></li>
      <li><a href="#e-database-initialization">e. Database Initialization</a></li>
    </ul>
  </li>
  <li><a href="#6-configure-uwsgi">6. Configure uWSGI</a></li>
  <li><a href="#7-nginx-configuration">7. NGINX Configuration</a></li>
  <li><a href="#8-dynamic-updates">8. Dynamic Updates</a>
    <ul>
      <li><a href="#a-updating-shell-script">a. Updating Shell Script</a></li>
      <li><a href="#b-database-user">b. Database User</a></li>
      <li><a href="#c-create-a-crontab-update-schedule">c. Create a crontab update schedule</a></li>
    </ul>
  </li>
  <li><a href="#9-publish-the-ssh-server-key">9. Publish the SSH Server Key</a></li>
</ul>

            </nav>
          </aside>
        
        <p>PowerDNS-Admin is a web-based administration interface for PowerDNS. Unlike other legacy front-end applications for PowerDNS, which often write directly to the PowerDNS database, this application uses the PowerDNS application programming interface introduced in PowerDNS 3.x and 4.x.
<br /></p>

<h2 id="1-system-requirements">1. System Requirements</h2>

<ul>
  <li>A working PowerDNS DNS server</li>
  <li>A MariaDB or MySQL database server.</li>
  <li>Git for source code.</li>
  <li>A Python development environment.</li>
  <li>Development libraries for MariaDB, SASL, LDAP, and SSL.</li>
  <li>A Python uWSGI application web server.</li>
  <li>An Nginx web server as a reverse proxy to the web application.
<br /></li>
</ul>

<h2 id="2-about-powerdns-admin">2. About PowerDNS Admin</h2>

<p>PowerDNS-Admin is a web-based interface for managing PowerDNS DNS servers. It allows users to manage DNS zones and records through an easy-to-use web interface. The interface is written in Python and uses the Flask framework and a SQL database to store data. In a Kubernetes environment, PowerDNS-Admin can be used to manage DNS records for a cluster and its resources through <a href="https://github.com/PowerDNS-Admin/PowerDNS-Admin">ExternalDNS</a>.</p>

<p>The PowerDNS Admin web interface has advanced features, including:</p>

<ul>
  <li>Provides forward and reverse zone management.</li>
  <li>Provides zone template features.</li>
  <li>Provides user management with role-based access control.</li>
  <li>Provides zone-specific access control.</li>
  <li>Provides activity logging.</li>
  <li>Authentication can be performed using:
    <ol>
      <li>Dukungan Pengguna Lokal.</li>
      <li>Dukungan SAML</li>
      <li>Dukungan LDAP: OpenLDAP / Active Directory</li>
      <li>Dukungan OAuth: Google / GitHub / Azure / OpenID</li>
    </ol>
  </li>
  <li>Two-factor authentication (TOTP) support.</li>
  <li>PDNS service configuration and statistics monitoring.</li>
  <li>DynDNS 2 protocol support.</li>
  <li>Easy editing of IPv6 PTR records.</li>
  <li>Provides APIs for zone and record management, among other features.</li>
  <li>Full IDN/Punycode support</li>
</ul>

<p>In the following diagram, you can see that PowerDNS-Admin calls the API from the PowerDNS Server via a secret key (see red box). The secret key will be set in the PowerDNS Server configuration.</p>

<p><br /></p>

<p><img src="https://gitlab.com/unixbsdshell/unixbsdshell.gitlab.io/-/raw/main/images/14API_PpwerDNS.jpg" alt="API Power DNS" /></p>

<p><br /></p>

<p>The first step is to generate a random password for the database user (16 characters recommended). Follow the script below to generate a random password.</p>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">$</span><span class="w"> </span>pwgen <span class="nt">-cns</span> 16 1
</code></pre></div></div>
<p>Also generate a random Flask secret app key (24 characters recommended).</p>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">$</span><span class="w"> </span>pwgen <span class="nt">-cns</span> 24 1
</code></pre></div></div>
<p><br /></p>

<h2 id="3-database">3. Database</h2>

<p>While PowerDNS stores its data in a MariaDB database, PowerDNS-Admin uses its own database to store users, permissions, and other information about the domains (zones) it manages.</p>

<p>To create the database used by the PowerDNS-Admin application, start an interactive session with root privileges on your database server.</p>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">$</span><span class="w"> </span>mysql <span class="nt">-u</span> root <span class="nt">-p</span>
<span class="go">Enter password: ********
</span></code></pre></div></div>

<p>The command above is used to log in to the MariaDB database server, using the password you created earlier. Once you’ve successfully logged in to the MariaDB database, continue with the following SQL command.</p>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">mysql</span><span class="o">&gt;</span> <span class="k">CREATE</span> <span class="k">DATABASE</span> <span class="n">powerdnsadmin</span><span class="p">;</span>
<span class="n">mysql</span><span class="o">&gt;</span> <span class="k">GRANT</span> <span class="k">ALL</span> <span class="k">PRIVILEGES</span> <span class="k">ON</span> <span class="n">powerdnsadmin</span><span class="p">.</span><span class="o">*</span> <span class="k">TO</span> <span class="s1">'powerdnsadmin'</span><span class="o">@</span><span class="s1">'localhost'</span>
                <span class="n">IDENTIFIED</span> <span class="k">BY</span> <span class="s1">'********'</span><span class="p">;</span>
<span class="n">mysql</span><span class="o">&gt;</span> <span class="n">FLUSH</span> <span class="k">PRIVILEGES</span><span class="p">;</span>
<span class="n">mysql</span><span class="o">&gt;</span> <span class="n">quit</span>
</code></pre></div></div>
<p><br /></p>

<h2 id="4-powerdns-admin-installation-process">4. PowerDNS Admin Installation Process</h2>

<p>Before you run the PowerDNS Admin installation process, first install the dependencies required by PowerDNS Admin, as shown in the example below.</p>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">$</span><span class="w"> </span><span class="nb">sudo </span>apt-get <span class="nb">install </span>libsasl2-dev libldap2-dev libmariadbclient-dev
</code></pre></div></div>
<p>On Ubuntu, PowerDNS Admin isn’t available in the default repositories; you’ll need to download it from the official website or through GitHub. Here’s an example of installing PowerDNS Admin from the GitHub repository.</p>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">$</span><span class="w"> </span><span class="nb">cd</span> /usr/local/lib
<span class="gp">$</span><span class="w"> </span><span class="nb">sudo </span>git clone https://github.com/ngoduykhanh/PowerDNS-Admin.git
<span class="gp">$</span><span class="w"> </span><span class="nb">sudo chown</span> <span class="nt">-R</span> www-data:www-data PowerDNS-Admin
</code></pre></div></div>
<p>Run the sudo command to use the web server, in this article we use NGINX.</p>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">$</span><span class="w"> </span><span class="nb">sudo</span> <span class="nt">-u</span> www-data <span class="nt">-Hs</span>
</code></pre></div></div>
<p>Create a new virtual Python environment named flask and activate it.</p>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">$</span><span class="w"> </span><span class="nb">cd</span> /usr/local/lib/PowerDNS-Admin
<span class="gp">$</span><span class="w"> </span>virtualenv <span class="nt">--python</span><span class="o">=</span>python2.7 flask
<span class="gp">$</span><span class="w"> </span><span class="nb">source</span> ./flask/bin/activate
</code></pre></div></div>
<p>You can now verify that you’re working in the Python virtual environment by viewing your system’s command prompt. If you’ve successfully logged into the Python virtual environment, your shell menu should look like the one below.</p>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">(flask) $</span><span class="w">
</span></code></pre></div></div>
<p>In the python virtual environment, install the required Python packages PowerDNS Admin.</p>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">(flask) $</span><span class="w"> </span>pip <span class="nb">install</span> <span class="nt">-r</span> requirements.txt
<span class="gp">(flask) $</span><span class="w"> </span>pip <span class="nb">install </span>mysql
</code></pre></div></div>
<p><br /></p>

<h2 id="5-powerdns-admin-configuration-process">5. PowerDNS Admin Configuration Process</h2>

<p>To begin configuring PowerDNS admin, the first step is to copy the sample configuration and edit it.</p>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">(flask) $</span><span class="w"> </span><span class="nb">cp </span>config_template.py config.py
</code></pre></div></div>

<div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">import</span> <span class="n">os</span>
<span class="n">basedir</span> <span class="o">=</span> <span class="n">os</span><span class="mf">.</span><span class="n">path</span><span class="mf">.</span><span class="nf">abspath</span><span class="p">(</span><span class="n">os</span><span class="mf">.</span><span class="n">path</span><span class="mf">.</span><span class="nb">dirname</span><span class="p">(</span><span class="k">__file__</span><span class="p">))</span>

<span class="c1"># BASIC APP CONFIG</span>
<span class="no">WTF_CSRF_ENABLED</span> <span class="o">=</span> <span class="kc">True</span>
<span class="no">SECRET_KEY</span> <span class="o">=</span> <span class="s1">'We are the world'</span>
<span class="no">BIND_ADDRESS</span> <span class="o">=</span> <span class="s1">'127.0.0.1'</span>
<span class="no">PORT</span> <span class="o">=</span> <span class="mi">9393</span>
<span class="no">LOGIN_TITLE</span> <span class="o">=</span> <span class="s2">"PDNS"</span>


<span class="c1"># TIMEOUT - for large zones</span>
<span class="no">TIMEOUT</span> <span class="o">=</span> <span class="mi">10</span>

<span class="c1"># LOG CONFIG</span>
<span class="no">LOG_LEVEL</span> <span class="o">=</span> <span class="s1">'DEBUG'</span>
<span class="no">LOG_FILE</span> <span class="o">=</span> <span class="s1">'logfile.log'</span>
<span class="c1"># For Docker, leave empty string</span>
<span class="c1">#LOG_FILE = ''</span>

<span class="c1"># Upload</span>
<span class="no">UPLOAD_DIR</span> <span class="o">=</span> <span class="n">os</span><span class="mf">.</span><span class="n">path</span><span class="mf">.</span><span class="nb">join</span><span class="p">(</span><span class="n">basedir</span><span class="p">,</span> <span class="s1">'upload'</span><span class="p">)</span>

<span class="c1"># DATABASE CONFIG</span>
<span class="c1">#You'll need MySQL-python</span>
<span class="no">SQLA_DB_USER</span> <span class="o">=</span> <span class="s1">'powerdnsadmin'</span>
<span class="no">SQLA_DB_PASSWORD</span> <span class="o">=</span> <span class="s1">'powerdnsadminpassword'</span>
<span class="no">SQLA_DB_HOST</span> <span class="o">=</span> <span class="s1">'mysqlhostorip'</span>
<span class="no">SQLA_DB_NAME</span> <span class="o">=</span> <span class="s1">'powerdnsadmin'</span>

<span class="c1">#MySQL</span>
<span class="no">SQLALCHEMY_DATABASE_URI</span> <span class="o">=</span> <span class="s1">'mysql://'</span><span class="o">+</span><span class="no">SQLA_DB_USER</span><span class="o">+</span><span class="s1">':'</span><span class="err">\</span>
    <span class="o">+</span><span class="no">SQLA_DB_PASSWORD</span><span class="o">+</span><span class="s1">'@'</span><span class="o">+</span><span class="no">SQLA_DB_HOST</span><span class="o">+</span><span class="s1">'/'</span><span class="o">+</span><span class="no">SQLA_DB_NAME</span>
<span class="c1">#SQLite</span>
<span class="c1">#SQLALCHEMY_DATABASE_URI = 'sqlite:////path/to/your/pdns.db'</span>
<span class="no">SQLALCHEMY_MIGRATE_REPO</span> <span class="o">=</span> <span class="n">os</span><span class="mf">.</span><span class="n">path</span><span class="mf">.</span><span class="nb">join</span><span class="p">(</span><span class="n">basedir</span><span class="p">,</span> <span class="s1">'db_repository'</span><span class="p">)</span>
<span class="no">SQLALCHEMY_TRACK_MODIFICATIONS</span> <span class="o">=</span> <span class="kc">True</span>

<span class="c1">## LDAP CONFIG</span>
<span class="c1">#LDAP_TYPE = 'ldap'</span>
<span class="c1">#LDAP_URI = 'ldaps://your-ldap-server:636'</span>
<span class="c1">#LDAP_USERNAME = 'cn=dnsuser,ou=users,ou=services,dc=duykhanh,dc=me'</span>
<span class="c1">#LDAP_PASSWORD = 'dnsuser'</span>
<span class="c1">#LDAP_SEARCH_BASE = 'ou=System Admins,ou=People,dc=duykhanh,dc=me'</span>
<span class="c1">## Additional options only if LDAP_TYPE=ldap</span>
<span class="c1">#LDAP_USERNAMEFIELD = 'uid'</span>
<span class="c1">#LDAP_FILTER = '(objectClass=inetorgperson)'</span>

<span class="c1">## AD CONFIG</span>
<span class="c1">#LDAP_TYPE = 'ad'</span>
<span class="c1">#LDAP_URI = 'ldaps://your-ad-server:636'</span>
<span class="c1">#LDAP_USERNAME = 'cn=dnsuser,ou=Users,dc=domain,dc=local'</span>
<span class="c1">#LDAP_PASSWORD = 'dnsuser'</span>
<span class="c1">#LDAP_SEARCH_BASE = 'dc=domain,dc=local'</span>
<span class="c1">## You may prefer 'userPrincipalName' instead</span>
<span class="c1">#LDAP_USERNAMEFIELD = 'sAMAccountName'</span>
<span class="c1">## AD Group that you would like to have accesss to web app</span>
<span class="c1">#LDAP_FILTER = 'memberof=cn=DNS_users,ou=Groups,dc=domain,dc=local'</span>

<span class="c1"># Github Oauth</span>
<span class="no">GITHUB_OAUTH_ENABLE</span> <span class="o">=</span> <span class="kc">False</span>
<span class="no">GITHUB_OAUTH_KEY</span> <span class="o">=</span> <span class="s1">'G0j1Q15aRsn36B3aD6nwKLiYbeirrUPU8nDd1wOC'</span>
<span class="no">GITHUB_OAUTH_SECRET</span> <span class="o">=</span> <span class="s1">'0WYrKWePeBDkxlezzhFbDn1PBnCwEa0vCwVFvy6iLtgePlpT7WfUlAa9sZgm'</span>
<span class="no">GITHUB_OAUTH_SCOPE</span> <span class="o">=</span> <span class="s1">'email'</span>
<span class="no">GITHUB_OAUTH_URL</span> <span class="o">=</span> <span class="s1">'http://127.0.0.1:5000/api/v3/'</span>
<span class="no">GITHUB_OAUTH_TOKEN</span> <span class="o">=</span> <span class="s1">'http://127.0.0.1:5000/oauth/token'</span>
<span class="no">GITHUB_OAUTH_AUTHORIZE</span> <span class="o">=</span> <span class="s1">'http://127.0.0.1:5000/oauth/authorize'</span>

<span class="c1">#Default Auth</span>
<span class="no">BASIC_ENABLED</span> <span class="o">=</span> <span class="kc">True</span>
<span class="no">SIGNUP_ENABLED</span> <span class="o">=</span> <span class="kc">True</span>

<span class="c1"># POWERDNS CONFIG</span>
<span class="no">PDNS_STATS_URL</span> <span class="o">=</span> <span class="s1">'http://172.16.214.131:8081/'</span>
<span class="no">PDNS_API_KEY</span> <span class="o">=</span> <span class="s1">'you never know'</span>
<span class="no">PDNS_VERSION</span> <span class="o">=</span> <span class="s1">'3.4.7'</span>

<span class="c1"># RECORDS ALLOWED TO EDIT</span>
<span class="no">RECORDS_ALLOW_EDIT</span> <span class="o">=</span> <span class="p">[</span><span class="s1">'A'</span><span class="p">,</span> <span class="s1">'AAAA'</span><span class="p">,</span> <span class="s1">'CNAME'</span><span class="p">,</span> <span class="s1">'SPF'</span><span class="p">,</span> <span class="s1">'PTR'</span><span class="p">,</span> <span class="s1">'MX'</span><span class="p">,</span> <span class="s1">'TXT'</span><span class="p">]</span>

<span class="c1"># EXPERIMENTAL FEATURES</span>
<span class="no">PRETTY_IPV6_PTR</span> <span class="o">=</span> <span class="kc">False</span>
</code></pre></div></div>

<h3 id="a-basic-settings">a. Basic Settings</h3>

<ul>
  <li>Enable CSRF (Cross-Site Request Forgery) protection for HTML forms. The default is True.</li>
  <li>Set a secret key to sign the user’s browser cookies to protect user sessions.</li>
  <li>The address and port where the application’s web interface will listen for incoming requests.</li>
</ul>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">#</span><span class="w"> </span>BASIC APP CONFIG
<span class="go">WTF_CSRF_ENABLED = True
SECRET_KEY = 'We are the world'
BIND_ADDRESS = '127.0.0.1'
PORT = 9393
LOGIN_TITLE = "PDNS"
</span></code></pre></div></div>
<p><br /></p>

<h3 id="b-connection-to-the-database">b. Connection to the database</h3>
<p><br /></p>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">#</span><span class="w"> </span>DATABASE CONFIG
<span class="gp">#</span>You<span class="s1">'ll need MySQL-python
</span><span class="go">SQLA_DB_USER = 'powerdnsadmin'
SQLA_DB_PASSWORD = 'powerdnsadminpassword'
SQLA_DB_HOST = 'mysqlhostorip'
SQLA_DB_NAME = 'powerdnsadmin'
</span></code></pre></div></div>
<p>Script di atas membutuhkan kata sandi acak yang telah anda buat pada bagian sebelumnya.</p>

<h3 id="c-disable-ldap-connection">c. Disable LDAP Connection</h3>

<p>In this article, we don’t have or use LDAP, so we’ll disable it by commenting out the relevant entry.</p>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">#</span>LDAP_URI <span class="o">=</span> <span class="s1">'ldaps://your-ldap-server:636'</span>
<span class="gp">#</span>LDAP_USERNAME <span class="o">=</span> <span class="s1">'cn=dnsuser,ou=users,ou=services,dc=duykhanh,dc=me'</span>
<span class="gp">#</span>LDAP_PASSWORD <span class="o">=</span> <span class="s1">'dnsuser'</span>
<span class="gp">#</span>LDAP_SEARCH_BASE <span class="o">=</span> <span class="s1">'ou=System Admins,ou=People,dc=duykhanh,dc=me'</span>
<span class="gp">#</span><span class="c"># Additional options only if LDAP_TYPE=ldap</span>
<span class="gp">#</span>LDAP_USERNAMEFIELD <span class="o">=</span> <span class="s1">'uid'</span>
<span class="gp">#</span>LDAP_FILTER <span class="o">=</span> <span class="s1">'(objectClass=inetorgperson)'</span>
<span class="go">
</span><span class="gp">#</span><span class="c"># AD CONFIG</span>
</code></pre></div></div>

<h3 id="d-powerdns-api-server-connection">d. PowerDNS API Server Connection</h3>

<p>This is how the web application connects to the PowerDNS server API interface. The settings must match your PowerDNS REST-API server configuration.</p>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">#</span><span class="w"> </span>POWERDNS CONFIG
<span class="go">PDNS_STATS_URL = 'http://172.16.214.131:8081/'
PDNS_API_KEY = 'you never know'
PDNS_VERSION = '3.4.7'
</span></code></pre></div></div>
<p>Allowed DNS record types. The defaults (‘A’, ‘AAAA’, ‘CNAME’, ‘SPF’, ‘PTR’, ‘MX’, ‘TXT’) are very limited. A list of all supported DNS record types is available in the PowerDNS server documentation.</p>

<p>We recommend the following:</p>

<ul>
  <li>A (maps hostnames to IPv4 addresses).</li>
  <li>AAAA (maps hostnames to IPv6 addresses).</li>
  <li>CERT (for storing SSL/TLS certificates in DNS).</li>
  <li>CNAME (hostname alias).</li>
  <li>MX (email exchange server).</li>
  <li>NAPTR (reverse mapping of phone numbers to VoIP addresses).</li>
  <li>NS (name servers responsible for the domain).</li>
  <li>OPENPGPKEY (stores PGP keys in DNS).</li>
  <li>PTR (reverse mapping of IP addresses to hostnames).</li>
  <li>SPF (Sender Policy Framework against email spam).</li>
  <li>SSHFP (for storing SSH public key fingerprints in DNS).</li>
  <li>SRV (maps service connections in the domain).</li>
  <li>T-LSA (SSL/TLS certificates authorized for the service to serve to clients).</li>
  <li>TXT (stores text in DNS).</li>
</ul>

<p>The following may also be used on our domain, but should not be edited by users, as they are managed elsewhere.</p>

<ul>
  <li>CDNSKEY (related to DNSSEC).</li>
  <li>CDS (related to DNSSEC).</li>
  <li>DNSKEY (related to DNSSEC, managed by pdnsutil).</li>
  <li>KEY (related to DNSSEC).</li>
  <li>NSEC, NSEC3, NSEC3PARAM (related to DNSSEC, managed by pdnsutil).</li>
  <li>RRSIG (related to DNSSEC, managed by pdnsutil).</li>
  <li>SOA (Start of Authority, defines domains in DNS).</li>
  <li>TKEY, TSIG (keys for signing and authenticating communications between a legitimate DNS server and a client).</li>
</ul>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">#</span><span class="w"> </span>RECORDS ALLOWED TO EDIT
<span class="go">RECORDS_ALLOW_EDIT = ['A', 'AAAA', 'CNAME', 'SPF', 'PTR', 'MX', 'TXT']
</span></code></pre></div></div>

<h3 id="e-database-initialization">e. Database Initialization</h3>

<p>Create a database record.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>(flask) $ ./create_db.py
</code></pre></div></div>

<p>We create an administrative user:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>(flask) $ ./start.py
</code></pre></div></div>
<p>After running the “start.py” script, open Google Chrome and type http://192.0.2.41:9393 to create your first user account, which will automatically have administrative privileges.</p>

<p>Exit your browser and stop the server by pressing CTRL-C in your session.
<br /></p>

<h2 id="6-configure-uwsgi">6. Configure uWSGI</h2>
<p>Create a uWSGI application configuration file in <code class="language-plaintext highlighter-rouge">/etc/uwsgi/apps-available/powerdns-admin.ini</code> with the following content.</p>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">;</span><span class="w"> </span>PowerDNS-Admin
<span class="go">[uwsgi]
plugins = python27

</span><span class="gp">;</span><span class="nv">uid</span><span class="o">=</span>www-data
<span class="gp">;</span><span class="nv">gid</span><span class="o">=</span>www-data
<span class="go">
chdir = /usr/local/lib/PowerDNS-Admin/
pythonpath = /usr/local/lib/PowerDNS-Admin/
virtualenv = /usr/local/lib/PowerDNS-Admin/flask

mount = /pdns=run.py
manage-script-name = true
callable = app

vacuum = true
harakiri = 20
post-buffering = 8192

</span><span class="gp">;</span>socket <span class="o">=</span> /run/uwsgi/app/%n/%n.socket
<span class="gp">;</span>chown-socket <span class="o">=</span> www-data
<span class="go">
</span><span class="gp">;</span>pidfile <span class="o">=</span> /run/uwsgi/app/%n/%n.pid
<span class="go">
</span><span class="gp">;</span>daemonize <span class="o">=</span> /var/log/uwsgi/app/%n.log
<span class="go">
enable-threads =
</span></code></pre></div></div>

<p>The commented line is already defined in the system-wide default settings. Create a symbolic link to enable it.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ cd /etc/uwsgi/
$ sudo ln -s apps-available/powerdns-admin.ini apps-enabled/
</code></pre></div></div>

<p>Now we start running uwsgi:</p>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">$</span><span class="w"> </span><span class="nb">sudo </span>service uwsgi start powerdns-admin
</code></pre></div></div>
<p><br /></p>

<h2 id="7-nginx-configuration">7. NGINX Configuration</h2>

<p>Create the file /etc/nginx/webapps/powerdns-admin.conf. An example script is shown below.</p>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code>#
# PowerDNS-Admin
# a web-based user interface to PowerDNS API server
#

location /dns {
    try_files $uri @powerdns-admin;
}

location @powerdns-admin {
   include uwsgi_params;
   uwsgi_pass unix:/run/uwsgi/app/powerdns-admin/powerdns-admin.socket;
}

location /dns/static/ {
   alias /usr/local/lib/PowerDNS-Admin/app/static/;
}
</code></pre></div></div>

<p>Include the file in the appropriate Nginx server definition.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code># PowerDNS-Admin
include     webapps/powerdns-admin.conf;
</code></pre></div></div>

<p>Run and restart the Nginx configuration:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ sudo service nginx conftest &amp;&amp; sudo service nginx reload
</code></pre></div></div>
<p><br /></p>

<h2 id="8-dynamic-updates">8. Dynamic Updates</h2>

<p>Your public IPv4 address may change from time to time. We need to ensure that if this happens, our DNS records are updated to the new address as quickly as possible.</p>

<p>Since we run our own DNS server, we can do this directly on the server, or more specifically, in its MySQL database. The MySQL query to do this looks like this.</p>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">UPDATE `records` SET content = "&lt;NEW IP ADDRESS&gt;</span><span class="s2">", change_date "</span>&lt;TIME_NOW&gt;<span class="s2">"
</span><span class="gp">    WHERE `type` = "A" AND `content` = "&lt;OLD IP ADDRESS&gt;</span><span class="s2">"</span><span class="p">;</span>
</code></pre></div></div>

<p>This replaces the IPv4 address on every host (A) record in all domains we are authorized to use. To do this automatically, a small script can be run as a cronjob every five minutes, which does the following:</p>

<ul>
  <li>Check the public IP address.</li>
  <li>Compare it to a known address.</li>
  <li>If it’s different, update the database record; otherwise, exit.</li>
  <li>Exit.</li>
</ul>

<h3 id="a-updating-shell-script">a. Updating Shell Script</h3>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">#!/bin/bash</span>
<span class="c">#</span>
<span class="c"># PowerDNS Dynamic IP Updates</span>

<span class="c"># Host to query for stored public IP address</span>
<span class="nv">KNOWN_HOST</span><span class="o">=</span>www.example.net

<span class="c"># Router to query for current IP</span>
<span class="nv">ROUTER_IP</span><span class="o">=</span>192.0.2.1
<span class="nv">ROUTER_USER</span><span class="o">=</span>pdns_updater
<span class="nv">ROUTER_SSH_KEY</span><span class="o">=</span><span class="nv">$HOME</span>/.ssh/pdns_updater_rsa
<span class="nv">ROUTER_IFC</span><span class="o">=</span>sfp1
<span class="c"># Display IP Address on MicroTik Routers</span>
<span class="nv">ROUTER_CMD</span><span class="o">=</span><span class="s2">":put [/ip address get [find interface=</span><span class="se">\"</span><span class="nv">$ROUTER_IFC</span><span class="se">\"</span><span class="s2">] address];"</span>

<span class="c"># Our domain name master server to ask stored IP</span>
<span class="nv">DNS_MASTER</span><span class="o">=</span>2001:db8::41

<span class="c"># MySQL server</span>
<span class="nv">MYSQL_HOST</span><span class="o">=</span>localhost
<span class="nv">MYSQL_USER</span><span class="o">=</span>pdns_updater
<span class="nv">MYSQL_PASSWORD</span><span class="o">=</span><span class="k">********</span>
<span class="nv">MYSQL_DB</span><span class="o">=</span>pdns

<span class="c"># Ask router for current interface IP</span>
<span class="nv">READ_WAN_IP</span><span class="o">=</span><span class="sb">`</span>ssh <span class="nv">$ROUTER_USER</span>@<span class="nv">$ROUTER_IP</span> <span class="nt">-i</span> <span class="nv">$ROUTER_SSH_KEY</span> <span class="nv">$ROUTER_CMD</span><span class="sb">`</span>

<span class="c"># Strip netmask ("/24") from IP</span>
<span class="nv">CURRENT_IP</span><span class="o">=</span><span class="sb">`</span><span class="nb">expr</span> <span class="s2">"</span><span class="nv">$READ_WAN_IP</span><span class="s2">"</span> : <span class="s1">'\([0-9\.]*\)'</span><span class="sb">`</span>

<span class="c"># Get current DNS address</span>
<span class="nv">DNS_IP</span><span class="o">=</span><span class="sb">`</span>dig +short @<span class="k">${</span><span class="nv">DNS_MASTER</span><span class="k">}</span> <span class="nv">$KNOWN_HOST</span> A<span class="sb">`</span>

<span class="c"># Compare the IPs</span>
<span class="k">if</span> <span class="o">[</span> <span class="nv">$CURRENT_IP</span> <span class="o">==</span> <span class="nv">$DNS_IP</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>
	<span class="c">#echo "*** IPs are the same :) ***"</span>
	<span class="nb">exit
</span><span class="k">else
	</span><span class="nb">echo</span> <span class="s2">"*** ALERT! Our WAN IP has changed! ***"</span>
	<span class="nb">echo</span> <span class="s2">"Old IP Address: </span><span class="nv">$DNS_IP</span><span class="s2">"</span>
	<span class="nb">echo</span> <span class="s2">"New IP Address: </span><span class="nv">$CURRENT_IP</span><span class="s2">"</span>

	<span class="c"># Update all records in PowerDNS database which use the old IP</span>
	mysql <span class="nt">-u</span> <span class="nv">$MYSQL_USER</span> <span class="nt">-p</span><span class="k">${</span><span class="nv">MYSQL_PASSWORD</span><span class="k">}</span> <span class="nt">-h</span> <span class="nv">$MYSQL_HOST</span> <span class="nv">$MYSQL_DB</span> <span class="nt">-e</span> <span class="se">\</span>
	   <span class="s2">"UPDATE </span><span class="se">\`</span><span class="s2">records</span><span class="se">\`</span><span class="s2"> 
	    	SET </span><span class="se">\`</span><span class="s2">content</span><span class="se">\`</span><span class="s2"> = </span><span class="se">\"</span><span class="nv">$CURRENT_IP</span><span class="se">\"</span><span class="s2">, </span><span class="se">\`</span><span class="s2">change_date</span><span class="se">\`</span><span class="s2">=</span><span class="se">\"</span><span class="sb">`</span><span class="nb">date</span> +%s<span class="sb">`</span><span class="se">\"</span><span class="s2">
        	WHERE </span><span class="se">\`</span><span class="s2">type</span><span class="se">\`</span><span class="s2"> = </span><span class="se">\"</span><span class="s2">A</span><span class="se">\"</span><span class="s2"> AND </span><span class="se">\`</span><span class="s2">content</span><span class="se">\`</span><span class="s2"> = </span><span class="se">\"</span><span class="nv">$DNS_IP</span><span class="se">\"</span><span class="s2">;"</span> <span class="se">\</span>
    <span class="o">&amp;&amp;</span> <span class="nb">echo</span> <span class="s2">"All DNS records with the old IP where updated."</span> <span class="se">\</span>
    <span class="o">||</span> <span class="nb">echo</span> <span class="s2">"*** Update of DNS records failed! ***"</span>
<span class="k">fi</span>
</code></pre></div></div>

<h3 id="b-database-user">b. Database User</h3>

<p>Create a database user called pdns_updater with a very restrictive set of privileges.</p>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="go">CREATE USER 'pdns_updater'@'localhost'
</span><span class="gp">    IDENTIFIED BY '********';</span><span class="w">
</span><span class="go">GRANT SELECT (`type`, `content`), UPDATE (`content`, `change_date`)
</span><span class="gp">    ON `pdns`.`records` TO 'pdns_updater'@'localhost';</span><span class="w">
</span><span class="gp">FLUSH PRIVILEGES;</span><span class="w">
</span></code></pre></div></div>

<h3 id="c-create-a-crontab-update-schedule">c. Create a crontab update schedule</h3>

<p>To define a cronjob that runs the update process every five minutes.</p>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">$</span><span class="w"> </span>crontab <span class="nt">-e</span>
<span class="gp">*/5 * * * * /$</span>HOME/bin/pdns_update.sh
</code></pre></div></div>

<h2 id="9-publish-the-ssh-server-key">9. Publish the SSH Server Key</h2>

<p>By publishing your SSH server’s public key in DNS, connecting clients can verify the server’s identity without having to distribute and update your server’s public key to all clients. You should already have a DNSSEC-secure DNS server set up for your server domain.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>sshfp -s server.example.net
# server.example.net SSH-2.0-OpenSSH_6.6.1p1 Ubuntu-2ubuntu2
server.example.net IN SSHFP 1 1 5E677..............................21447
</code></pre></div></div>
<p>If you are using a PowerDNS server with the poweradmin web interface, add the following note.</p>

<p>Name                                        Type                    Content</p>

<p>server.example.net                    SSHFP                1 1 5E677…………………………21447</p>

<p>In conclusion, installing PowerDNS and PowerDNS-Admin on Ubuntu is a simple process that involves adding the PowerDNS repository, installing the PowerDNS package, and configuring the database. Once installed, you can use the dig command to query DNS servers, and the PowerDNS-Admin interface to manage them.</p>

        
      </section>

      <footer class="page__meta">
        
        
  


  
  
  

  <p class="page__taxonomy">
    <strong><i class="fas fa-fw fa-tags" aria-hidden="true"></i> Tags: </strong>
    <span itemprop="keywords">
    
      
      
      <a href="/tags/#dnsserver" class="page__taxonomy-item" rel="tag">DNSServer</a>
    
    </span>
  </p>




  


  
  
  

  <p class="page__taxonomy">
    <strong><i class="fas fa-fw fa-folder-open" aria-hidden="true"></i> Categories: </strong>
    <span itemprop="keywords">
    
      
      
      <a href="/categories/#linux" class="page__taxonomy-item" rel="tag">Linux</a>
    
    </span>
  </p>


        
  <p class="page__date"><strong><i class="fas fa-fw fa-calendar-alt" aria-hidden="true"></i> Updated:</strong> <time datetime="2025-07-16T09:57:32+03:00">July 16, 2025</time></p>


      </footer>

      <section class="page__share">
  

  <a href="https://twitter.com/intent/tweet?via=iwanset96143401&text=PowerDNS+Admin+Installation+Process+on+Ubuntu%20https%3A%2F%2Funixwinbsd.site%2Flinux%2Finstallation-powerdns-admin-nginx-ubuntu%2F" class="btn btn--twitter" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" title="Share on Twitter"><i class="fab fa-fw fa-twitter" aria-hidden="true"></i><span> Twitter</span></a>

  <a href="https://www.facebook.com/sharer/sharer.php?u=https%3A%2F%2Funixwinbsd.site%2Flinux%2Finstallation-powerdns-admin-nginx-ubuntu%2F" class="btn btn--facebook" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" title="Share on Facebook"><i class="fab fa-fw fa-facebook" aria-hidden="true"></i><span> Facebook</span></a>

  <a href="https://www.linkedin.com/shareArticle?mini=true&url=https%3A%2F%2Funixwinbsd.site%2Flinux%2Finstallation-powerdns-admin-nginx-ubuntu%2F" class="btn btn--linkedin" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" title="Share on LinkedIn"><i class="fab fa-fw fa-linkedin" aria-hidden="true"></i><span> LinkedIn</span></a>
</section>


      
  <nav class="pagination">
    
      <a href="/freebsd/running-proxy-chain-tor-ghostbsd/" class="pagination--pager" title="Running Proxy Chains with TOR on GhostBSD
">Previous</a>
    
    
      <a href="/freebsd/gpart-command-manage-disk-partition-freebsd/" class="pagination--pager" title="gpart Command To Manage Disk Partitions in FreeBSD - Part 1
">Next</a>
    
  </nav>

    </div>

    
  </article>

  
  
    <div class="page__related">
      <h4 class="page__related-title">You May Also Enjoy</h4>
      <div class="grid__wrapper">
        
          



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
    <h2 class="archive__item-title no_toc" itemprop="headline">
      
        <a href="/freebsd/installation-java-development-kit-on-freebsd/" rel="permalink">Installing and Using the Java Development Kit on FreeBSD
</a>
      
    </h2>
    

  <p class="page__meta">
    

    

    
      
      

      <span class="page__meta-readtime">
        <i class="far fa-clock" aria-hidden="true"></i>
        
          8 minute read
        
      </span>
    
  </p>


    <p class="archive__item-excerpt" itemprop="description">Redmine is open source software or application that uses the Ruby On Rails Framework. Redmine is a project management or project tracking application which r...</p>
  </article>
</div>

        
          



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
    <h2 class="archive__item-title no_toc" itemprop="headline">
      
        <a href="/freebsd/how-to-install-webmin-on-freebsd-machine/" rel="permalink">How to Install Webmin on a FreeBSD System
</a>
      
    </h2>
    

  <p class="page__meta">
    

    

    
      
      

      <span class="page__meta-readtime">
        <i class="far fa-clock" aria-hidden="true"></i>
        
          3 minute read
        
      </span>
    
  </p>


    <p class="archive__item-excerpt" itemprop="description">Webmin is a web-based system administration tool for Unix-like servers, and a service with approximately 1,000,000 annual installations worldwide
</p>
  </article>
</div>

        
          



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
    <h2 class="archive__item-title no_toc" itemprop="headline">
      
        <a href="/freebsd/configuration-radicale-caldav-cardavv-server-freebsd/" rel="permalink">How to Configure FreeBSD with Radicale CalDAV CardDAV Server
</a>
      
    </h2>
    

  <p class="page__meta">
    

    

    
      
      

      <span class="page__meta-readtime">
        <i class="far fa-clock" aria-hidden="true"></i>
        
          4 minute read
        
      </span>
    
  </p>


    <p class="archive__item-excerpt" itemprop="description">Radicale is run with the help of the Apache or NGINX web server, so it can be operated either as a standalone package using its internal http/https server or...</p>
  </article>
</div>

        
          



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
    <h2 class="archive__item-title no_toc" itemprop="headline">
      
        <a href="/freebsd/setup-mirror-site-convert-pkg-package-freebsd/" rel="permalink">Setting up a Mirror Site to convert PKG Packages on FreeBSD
</a>
      
    </h2>
    

  <p class="page__meta">
    

    

    
      
      

      <span class="page__meta-readtime">
        <i class="far fa-clock" aria-hidden="true"></i>
        
          4 minute read
        
      </span>
    
  </p>


    <p class="archive__item-excerpt" itemprop="description">PKG packages on FreeBSD contain pre-compiled software packages – called packages. This is the easiest way to install additional software under TwinCAT/BSD or...</p>
  </article>
</div>

        
      </div>
    </div>
  
  
</div>

    </div>

    
      <div class="search-content">
        <div class="search-content__inner-wrap"><form class="search-content__form" onkeydown="return event.key != 'Enter';">
    <label class="sr-only" for="search">
      Enter your search term...
    </label>
    <input type="search" id="search" class="search-input" tabindex="-1" placeholder="Enter your search term..." />
  </form>
  <div id="results" class="results"></div></div>

      </div>
    

    <div id="footer" class="page__footer">
      <footer>
        <!-- start custom footer snippets -->

<!-- end custom footer snippets -->
        <div class="page__footer-follow">
  <ul class="social-icons">
    

    
      
        
          <li><a href="https://github.com/unixwinbsd/unixwinbsd.github.io" rel="nofollow noopener noreferrer"><i class="fab fa-fw fa-github" aria-hidden="true"></i> GitHub</a></li>
        
      
        
          <li><a href="https://www.linkedin.com/in/catanesi/" rel="nofollow noopener noreferrer"><i class="fab fa-fw fa-linkedin" aria-hidden="true"></i> LinkedIn Profile</a></li>
        
      
        
          <li><a href="https://github.com/unixwinbsd/unixwinbsd.github.io" rel="nofollow noopener noreferrer"><i class="fas fa-fw fa-link" aria-hidden="true"></i> Website</a></li>
        
      
    

    <li><a href="/feed.xml"><i class="fas fa-fw fa-rss-square" aria-hidden="true"></i> Feed</a></li>
  </ul>
</div>

<div class="page__footer-copyright">&copy; 2025 UnixBSDShell Blog. Powered by <a href="https://jekyllrb.com" rel="nofollow">Jekyll</a> &amp; <a href="https://mademistakes.com/work/minimal-mistakes-jekyll-theme/" rel="nofollow">Minimal Mistakes</a>.</div>

      </footer>
    </div>

    
  <script src="/assets/js/main.min.js"></script>




<script src="/assets/js/lunr/lunr.min.js"></script>
<script src="/assets/js/lunr/lunr-store.js"></script>
<script src="/assets/js/lunr/lunr-en.js"></script>




    
  <script>
    var disqus_config = function () {
      this.page.url = "https://unixwinbsd.site/linux/installation-powerdns-admin-nginx-ubuntu/";  /* Replace PAGE_URL with your page's canonical URL variable */
      this.page.identifier = "/linux/installation-powerdns-admin-nginx-ubuntu"; /* Replace PAGE_IDENTIFIER with your page's unique identifier variable */
    };
    (function() { /* DON'T EDIT BELOW THIS LINE */
      var d = document, s = d.createElement('script');
      s.src = 'https://UnixBSDShell.disqus.com/embed.js';
      s.setAttribute('data-timestamp', +new Date());
      (d.head || d.body).appendChild(s);
    })();
  </script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>


  







  </body>
</html>
