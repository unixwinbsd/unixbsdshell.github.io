<!doctype html>
<!--
  Minimal Mistakes Jekyll Theme 4.20.2 by Michael Rose
  Copyright 2013-2020 Michael Rose - mademistakes.com | @mmistakes
  Free for personal and commercial use under the MIT license
  https://github.com/mmistakes/minimal-mistakes/blob/master/LICENSE
-->
<html lang="en" class="no-js">
  <head>
    <meta charset="utf-8">

<!-- begin _includes/seo.html --><title>gpart Command To Manage Disk Partitions in FreeBSD - Part 2 - UnixBSDShell</title>
<meta name="description" content="gpart GEOM Partitioning is a FreeBSD embedded shell command line for managing or recovering disk partition tables, especially if the primary partition table has been damaged or lost.">


  <meta name="author" content="UnixBSDShell's Blog">
  
  <meta property="article:author" content="UnixBSDShell's Blog">
  


<meta property="og:type" content="article">
<meta property="og:locale" content="en_US">
<meta property="og:site_name" content="UnixBSDShell">
<meta property="og:title" content="gpart Command To Manage Disk Partitions in FreeBSD - Part 2">
<meta property="og:url" content="https://unixwinbsd.site/freebsd/gpart-command-manage-disk-partitions-2/">


  <meta property="og:description" content="gpart GEOM Partitioning is a FreeBSD embedded shell command line for managing or recovering disk partition tables, especially if the primary partition table has been damaged or lost.">





  <meta name="twitter:site" content="@iwanset96143401">
  <meta name="twitter:title" content="gpart Command To Manage Disk Partitions in FreeBSD - Part 2">
  <meta name="twitter:description" content="gpart GEOM Partitioning is a FreeBSD embedded shell command line for managing or recovering disk partition tables, especially if the primary partition table has been damaged or lost.">
  <meta name="twitter:url" content="https://unixwinbsd.site/freebsd/gpart-command-manage-disk-partitions-2/">

  
    <meta name="twitter:card" content="summary">
    
  

  



  <meta property="article:published_time" content="2025-05-05T19:45:33+03:00">





  

  


<link rel="canonical" href="https://unixwinbsd.site/freebsd/gpart-command-manage-disk-partitions-2/">




<script type="application/ld+json">
  {
    "@context": "https://schema.org",
    
      "@type": "Person",
      "name": "UnixBSDShell Blog",
      "url": "https://unixwinbsd.site/"
    
  }
</script>


  <meta name="google-site-verification" content="googledc9be5e5382da4fd" />


  <meta name="msvalidate.01" content="BCDF1444D895EBA62C6422C90DF8EA1C">



  <meta name="yandex-verification" content="69d778baa1dbd371">


<!-- end _includes/seo.html -->


<link href="/feed.xml" type="application/atom+xml" rel="alternate" title="UnixBSDShell Feed">

<!-- https://t.co/dKP3o1e -->
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script>
  document.documentElement.className = document.documentElement.className.replace(/\bno-js\b/g, '') + ' js ';
</script>

<!-- For all browsers -->
<link rel="stylesheet" href="/assets/css/main.css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5/css/all.min.css">

<!--[if IE]>
  <style>
    /* old IE unsupported flexbox fixes */
    .greedy-nav .site-title {
      padding-right: 3em;
    }
    .greedy-nav button {
      position: absolute;
      top: 0;
      right: 0;
      height: 100%;
    }
  </style>
<![endif]-->



    <!-- start custom head snippets -->

<!-- insert favicons. use https://realfavicongenerator.net/ -->

<!-- <script data-ad-client="ca-pub-8799681346916578" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script> -->

<!-- end custom head snippets -->


<meta name="google-site-verification" content="RT2u0cL3NCPK3ydcuewM50F8hvklo6JxBJGxu0zypiw" />
<!-- Yandex.Metrika counter -->
<script type="text/javascript">
    (function(m,e,t,r,i,k,a){
        m[i]=m[i]||function(){(m[i].a=m[i].a||[]).push(arguments)};
        m[i].l=1*new Date();
        for (var j = 0; j < document.scripts.length; j++) {if (document.scripts[j].src === r) { return; }}
        k=e.createElement(t),a=e.getElementsByTagName(t)[0],k.async=1,k.src=r,a.parentNode.insertBefore(k,a)
    })(window, document,'script','https://mc.yandex.ru/metrika/tag.js', 'ym');

    ym(95812963, 'init', {webvisor:true, clickmap:true, ecommerce:"dataLayer", accurateTrackBounce:true, trackLinks:true});
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/95812963" style="position:absolute; left:-9999px;" alt="" /></div></noscript>
<!-- /Yandex.Metrika counter -->
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=GT-TNPXBWRM"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'GT-TNPXBWRM');
</script>

<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-RWLWYNFRW0"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-RWLWYNFRW0');
</script>

<script>
gtag('set', 'user_data', {
"email": datainchi@gmail.com,
"phone_number": +6281289065249,
"address": {
"first_name": Iwan,
"last_name": Setiawan,
"street": Kp. Warung Bongkok RT. 002/01,
"city": Kabupaten Bekasi,
"region": Jawa Barat,
"postal_code": 17841,
"country": Indonesia
}
});
</script>

<!-- Google Tag Manager -->
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-N7TLZSRG');</script>
<!-- End Google Tag Manager -->



  </head>

  <body class="layout--single">

<!-- Google Tag Manager (noscript) -->
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-N7TLZSRG"
height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<!-- End Google Tag Manager (noscript) -->

    <nav class="skip-links">
  <h2 class="screen-reader-text">Skip links</h2>
  <ul>
    <li><a href="#site-nav" class="screen-reader-shortcut">Skip to primary navigation</a></li>
    <li><a href="#main" class="screen-reader-shortcut">Skip to content</a></li>
    <li><a href="#footer" class="screen-reader-shortcut">Skip to footer</a></li>
  </ul>
</nav>

    <!--[if lt IE 9]>
<div class="notice--danger align-center" style="margin: 0;">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience.</div>
<![endif]-->

    

<div class="masthead">
  <div class="masthead__inner-wrap">
    <div class="masthead__menu">
      <nav id="site-nav" class="greedy-nav">
        
        <a class="site-title" href="/">
          UnixBSDShell
          
        </a>
        <ul class="visible-links"><li class="masthead__menu-item">
              <a href="/about/">About</a>
            </li><li class="masthead__menu-item">
              <a href="/categories/">Posts by Category</a>
            </li><li class="masthead__menu-item">
              <a href="/year-archive/">Posts by Year</a>
            </li></ul>
        
        <button class="search__toggle" type="button">
          <span class="visually-hidden">Toggle search</span>
          <svg class="icon" width="16" height="16" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 15.99 16">
            <path d="M15.5,13.12L13.19,10.8a1.69,1.69,0,0,0-1.28-.55l-0.06-.06A6.5,6.5,0,0,0,5.77,0,6.5,6.5,0,0,0,2.46,11.59a6.47,6.47,0,0,0,7.74.26l0.05,0.05a1.65,1.65,0,0,0,.5,1.24l2.38,2.38A1.68,1.68,0,0,0,15.5,13.12ZM6.4,2A4.41,4.41,0,1,1,2,6.4,4.43,4.43,0,0,1,6.4,2Z" transform="translate(-.01)"></path>
          </svg>
        </button>
        
        <button class="greedy-nav__toggle hidden" type="button">
          <span class="visually-hidden">Toggle menu</span>
          <div class="navicon"></div>
        </button>
        <ul class="hidden-links hidden"></ul>
      </nav>
    </div>
  </div>
</div>


    <div class="initial-content">
      


  
    



<nav class="breadcrumbs">
  <ol itemscope itemtype="https://schema.org/BreadcrumbList">
    
    
    
      
        <li itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">
          <a href="https://unixwinbsd.site/" itemprop="item"><span itemprop="name">Home</span></a>
          <meta itemprop="position" content="1" />
        </li>
        <span class="sep">/</span>
      
      
        
        <li itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">
          <a href="/categories/#freebsd" itemprop="item"><span itemprop="name">Freebsd</span></a>
          <meta itemprop="position" content="2" />
        </li>
        <span class="sep">/</span>
      
    
      
      
        <li class="current">gpart Command To Manage Disk Partitions in FreeBSD - Part 2</li>
      
    
  </ol>
</nav>

  


<div id="main" role="main">
  
  <div class="sidebar sticky">
  


<div itemscope itemtype="https://schema.org/Person">

  
    <div class="author__avatar">
      
        <img src="/assets/images/pscustomobject.jpg" alt="UnixBSDShell's Blog" itemprop="image">
      
    </div>
  

  <div class="author__content">
    
      <h3 class="author__name" itemprop="name">UnixBSDShell's Blog</h3>
    
    
      <div class="author__bio" itemprop="description">
        <p>unixwinbsd.site is an online learning platform that provides online tutorials and videos about unix, FreeBSD, OpenBSD and Linux. Not only that, unixwinbsd.site also presents a variety of topics, including software development, programming, web design, and more. This blog provides various online tutorials and videos for beginners and experienced professionals. This blog also provides a Q&amp;A forum for users to ask questions and get help from other members.</p>

      </div>
    
  </div>

  <div class="author__urls-wrapper">
    <button class="btn btn--inverse">Follow</button>
    <ul class="author__urls social-icons">
      
        <li itemprop="homeLocation" itemscope itemtype="https://schema.org/Place">
          <i class="fas fa-fw fa-map-marker-alt" aria-hidden="true"></i> <span itemprop="name">Moscow, Russia</span>
        </li>
      

      
        
          
            <li><a href="https://github.com/unixwinbsd/unixwinbsd.github.io" rel="nofollow noopener noreferrer"><i class="fas fa-fw fa-link" aria-hidden="true"></i><span class="label">Website</span></a></li>
          
        
          
            <li><a href="https://github.com/unixwinbsd/unixwinbsd.github.io" rel="nofollow noopener noreferrer"><i class="fas fa-fw fa-link" aria-hidden="true"></i><span class="label">DevOps Notes</span></a></li>
          
        
          
            <li><a href="https://www.linkedin.com/in/iwan-setiawan-943659164/" rel="nofollow noopener noreferrer"><i class="fab fa-fw fa-linkedin" aria-hidden="true"></i><span class="label">LinkedIn</span></a></li>
          
        
          
            <li><a href="https://github.com/unixwinbsd/unixwinbsd.github.io" rel="nofollow noopener noreferrer"><i class="fab fa-fw fa-github" aria-hidden="true"></i><span class="label">GitHub</span></a></li>
          
        
      

      

      
        <li>
          <a href="mailto:iwanse1212@yandex.com">
            <meta itemprop="email" content="iwanse1212@yandex.com" />
            <i class="fas fa-fw fa-envelope-square" aria-hidden="true"></i><span class="label">Email</span>
          </a>
        </li>
      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      <!--
  <li>
    <a href="http://link-to-whatever-social-network.com/user/" itemprop="sameAs" rel="nofollow noopener noreferrer">
      <i class="fas fa-fw" aria-hidden="true"></i> Custom Social Profile Link
    </a>
  </li>
-->
    </ul>
  </div>
</div>

  
  </div>



  <article class="page" itemscope itemtype="https://schema.org/CreativeWork">
    <meta itemprop="headline" content="gpart Command To Manage Disk Partitions in FreeBSD - Part 2">
    <meta itemprop="description" content="gpart GEOM Partitioning is a FreeBSD embedded shell command line for managing or recovering disk partition tables, especially if the primary partition table has been damaged or lost.">
    <meta itemprop="datePublished" content="2025-05-05T19:45:33+03:00">
    

    <div class="page__inner-wrap">
      
        <header>
          <h1 id="page-title" class="page__title" itemprop="headline">gpart Command To Manage Disk Partitions in FreeBSD - Part 2
</h1>
          

  <p class="page__meta">
    

    

    
      
      

      <span class="page__meta-readtime">
        <i class="far fa-clock" aria-hidden="true"></i>
        
          8 minute read
        
      </span>
    
  </p>


        </header>
      

      <section class="page__content" itemprop="text">
        
          <aside class="sidebar__right sticky">
            <nav class="toc">
              <header><h4 class="nav__title"><i class="fas fa-file-alt"></i> On this page</h4></header>
              <ul class="toc__menu">
  <li><a href="#g-modifying-partition-attributes---gpart-modify">g. Modifying Partition Attributes - gpart modify</a>
    <ul>
      <li><a href="#g1-changing-partition-labels">g.1. Changing Partition Labels</a></li>
      <li><a href="#g2-changing-partition-type">g.2. Changing Partition Type</a></li>
    </ul>
  </li>
  <li><a href="#h-changing-partition-size---gpart-resize">h. Changing Partition Size - gpart resize</a></li>
  <li><a href="#i-installing-boot-code-to-partitions---gpart-bootcode">i. Installing Boot Code to Partitions - gpart bootcode</a></li>
  <li><a href="#j-creating-a-backup-partition---gpart-backup">j. Creating a Backup Partition - gpart backup</a></li>
  <li><a href="#k-recovering-partitions---gpart-restore">k. Recovering Partitions - gpart restore</a>
    <ul>
      <li><a href="#k1-delete-partition">k.1. Delete Partition</a></li>
      <li><a href="#k2-create-a-table-of-partition-schemes-and-partition-types">k.2. Create a table of partition schemes and partition types.</a></li>
      <li><a href="#k3-create-backup-partition">k.3. Create Backup Partition</a></li>
      <li><a href="#k4-delete-partition">k.4. Delete Partition</a></li>
      <li><a href="#k5-recover-partition">k.5. Recover Partition</a></li>
    </ul>
  </li>
</ul>

            </nav>
          </aside>
        
        <p>This article is a continuation of the previous article. In this article we will continue with other gpart commands. So that you do not have difficulty in learning the gpart command, I suggest reading the previous article. If you want a deeper understanding of the gpart command and others, I suggest reading the book I wrote <a href="https://gitflic.ru/project/iwanse1212/the-freebsd-handbook-system-administrator">“The FreeBSD Handbook - System Administrator”</a>.</p>

<p>In the previous article, namely at point “C”, the discussion of the gpart command reached point “f”. In this article we will start from point “g”.</p>

<h3 id="g-modifying-partition-attributes---gpart-modify">g. Modifying Partition Attributes - <code class="language-plaintext highlighter-rouge">gpart modify</code></h3>

<p>The gpart modify command can only change the partition type and partition label. To change the partition type and label you must identify it with the -i (index) option.</p>

<p>To be able to use each gpart modify option, you can read it in the table below:</p>

<table>
  <thead>
    <tr>
      <th>Flags</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>-f flags</td>
      <td>Additional operational flags. See the section titled “OPERATIONAL FLAGS” below for a discussion of their use.</td>
    </tr>
    <tr>
      <td>-i index</td>
      <td>Specifies the index of the partition to be modified.</td>
    </tr>
    <tr>
      <td>-l label</td>
      <td>Change the partition label to label.</td>
    </tr>
    <tr>
      <td>-t type</td>
      <td>Change the partition type to type.</td>
    </tr>
  </tbody>
</table>

<p>In the table above, we can see that the gpart modify command can only work on the -l and -t options with reference to the -i option.</p>

<h4 id="g1-changing-partition-labels">g.1. Changing Partition Labels</h4>
<p>In the example below we will provide a way to change the label of a hard disk.</p>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">root@ns4:~ #</span><span class="w"> </span>gpart show <span class="nt">-l</span> ada0
<span class="gp">=&gt;</span><span class="w">       </span>40  488397088  ada0  GPT  <span class="o">(</span>233G<span class="o">)</span>
<span class="go">         40       1024     1  gptboot0  (512K)
       1064        984        - free -  (492K)
       2048    4194304     2  swap0  (2.0G)
    4196352  484200448     3  zfs0  (231G)
  488396800        328        - free -  (164K)
</span></code></pre></div></div>

<p>Pay attention to the message displayed by the gpart show command. The description above explains that the hard disk label name is <code class="language-plaintext highlighter-rouge">"zfs0"</code> with the index number 3. We will change the label name to “hard-disk-1” with the gpart modify command as in the example below.</p>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">root@ns4:~ #</span><span class="w"> </span>gpart modify <span class="nt">-i</span> 3 <span class="nt">-l</span> hard-disk-1 ada0
<span class="go">ada0p3 modified
</span></code></pre></div></div>
<p>After you change the label name to hard-disk-1, run the gpart show command to see whether the label name has been changed or not.</p>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">root@ns4:~ #</span><span class="w"> </span>gpart show <span class="nt">-l</span> ada0
<span class="gp">=&gt;</span><span class="w">       </span>40  488397088  ada0  GPT  <span class="o">(</span>233G<span class="o">)</span>
<span class="go">         40       1024     1  gptboot0  (512K)
       1064        984        - free -  (492K)
       2048    4194304     2  swap0  (2.0G)
    4196352  484200448     3  hard-disk-1  (231G)
  488396800        328        - free -  (164K)
</span></code></pre></div></div>

<p>In the command above we can see, the label name “zfs0” has been changed to “hard-disk-1”.</p>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">root@ns4:~ #</span><span class="w"> </span>diskinfo /dev/gpt/namalabel
<span class="go">/dev/gpt/namalabel      512     2147483648      4194304 0       1048576 261     255     63
</span></code></pre></div></div>

<h4 id="g2-changing-partition-type">g.2. Changing Partition Type</h4>
<p>With gpart modify you can also change the hard disk partition type. You can change the type of existing partitions, see the partition of a Flashdisk below.</p>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">root@ns4:~ #</span><span class="w"> </span>gpart show da0
<span class="gp">=&gt;</span><span class="w">      </span>40  30834608  da0  GPT  <span class="o">(</span>15G<span class="o">)</span>
<span class="go">        40      2008       - free -  (1.0M)
      2048  14680064    1  freebsd-ufs  (7.0G)
  14682112   2097152    2  freebsd-ufs  (1.0G)
  16779264   4194304    3  freebsd-ufs  (2.0G)
  20973568   9861080       - free -  (4.7G)
</span></code></pre></div></div>

<p>There are three types of partitions, namely freebsd-ufs with index numbers 1, 2 and 3. Because you want to create a swap file, one of the freebsd-ufs partitions will be changed into a swap partition, for example index no. 2 will be changed to swap. To do this, you simply run the command below.</p>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">root@ns4:~ #</span><span class="w"> </span>gpart modify <span class="nt">-i</span> 2 <span class="nt">-t</span> freebsd-swap da0
<span class="go">da0p2 modified
</span></code></pre></div></div>

<p>Now let’s see the changes from the above command with gpart show.</p>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">root@ns4:~ #</span><span class="w"> </span>gpart show da0
<span class="gp">=&gt;</span><span class="w">      </span>40  30834608  da0  GPT  <span class="o">(</span>15G<span class="o">)</span>
<span class="go">        40      2008       - free -  (1.0M)
      2048  14680064    1  freebsd-ufs  (7.0G)
  14682112   2097152    2  freebsd-swap  (1.0G)
  16779264   4194304    3  freebsd-ufs  (2.0G)
  20973568   9861080       - free -  (4.7G)
</span></code></pre></div></div>

<h3 id="h-changing-partition-size---gpart-resize">h. Changing Partition Size - <code class="language-plaintext highlighter-rouge">gpart resize</code></h3>
<p>Each partition has a predetermined size, but you can change the size of the partition as desired. The gpart resize command can be used to change the size of an existing partition on a disk.</p>

<p>As usual, before running the gpart command, see the currently active partition.</p>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">root@ns4:~ #</span><span class="w"> </span>gpart show da0
<span class="gp">=&gt;</span><span class="w">      </span>40  30834608  da0  GPT  <span class="o">(</span>15G<span class="o">)</span>
<span class="go">        40       512    1  freebsd-boot  (256K)
       552   2097152    2  freebsd-swap  (1.0G)
   2097704  12582912    3  freebsd-ufs   (6.0G)
  14680616  16154032       - free -      (7.7G)
</span></code></pre></div></div>
<p>In the above command, there is free space at the end of the disk of about 7.7G. Since partitions can only be resized to contiguous chunks of space, to resize the second partition (i.e. the root partition), we need to delete the third partition (which is safe because the swap partition only holds temporary data), resize the second partition, and then recreate the swap partition.</p>

<p>If you have enabled swap with the command “swapon /dev/da0”, first turn off the swap file in da0.</p>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">root@ns4:~ #</span><span class="w"> </span>swapoff /dev/da0
</code></pre></div></div>

<p>The next step is to delete the swap partition. Since the swap file is in index no. 2, you delete the swap file with the gpart delete command.</p>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">root@ns4:~ #</span><span class="w"> </span>gpart delete <span class="nt">-i</span> 2 /dev/da0
</code></pre></div></div>

<p>See the changes from the swap partition deletion command.</p>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">root@ns4:~ #</span><span class="w"> </span>gpart show /dev/da0
<span class="gp">=&gt;</span><span class="w">      </span>40  30834608  da0  GPT  <span class="o">(</span>15G<span class="o">)</span>
<span class="go">        40       512    1  freebsd-boot  (256K)
       552   2097152       - free -      (1.0G)
   2097704  12582912    3  freebsd-ufs   (6.0G)
  14680616  16154032       - free -      (7.7G)
</span></code></pre></div></div>

<p>Then we change the size of the freebsd-ufs partition to 12G. Note the index number of the freebsd-ufs partition. To change the size of the freebsd-ufs partition from 6.0G to 12G, run the command below.</p>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">root@ns4:~ #</span><span class="w"> </span>gpart resize <span class="nt">-i</span> 3 <span class="nt">-s</span> 12G <span class="nt">-a</span> 4k da0
<span class="go">da0p3 resized
</span></code></pre></div></div>

<p>As usual, view the results with the gpart show command.</p>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">root@ns4:~ #</span><span class="w"> </span>gpart show da0
<span class="gp">=&gt;</span><span class="w">      </span>40  30834608  da0  GPT  <span class="o">(</span>15G<span class="o">)</span>
<span class="go">        40       512    1  freebsd-boot  (256K)
       552   2097152       - free -      (1.0G)
   2097704  25165824    3  freebsd-ufs   (12G)
  27263528   3571120       - free -      (1.7G)
</span></code></pre></div></div>

<p>From the command above there is still 1.7G of free space. The remaining size will be used to store the swap file. To create a swap partition you can run the following command.</p>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">root@ns4:~ #</span><span class="w"> </span>gpart add <span class="nt">-t</span> freebsd-swap <span class="nt">-a</span> 4k da0
<span class="go">da0p2 added
</span></code></pre></div></div>

<h3 id="i-installing-boot-code-to-partitions---gpart-bootcode">i. Installing Boot Code to Partitions - <code class="language-plaintext highlighter-rouge">gpart bootcode</code></h3>
<p>To install boot code to the partition scheme metadata on a disk, use the gpart bootcode command. For example, to install GPT boot code on da0, use:</p>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">root@ns4:~ #</span><span class="w"> </span>gpart bootcode <span class="nt">-b</span> /boot/pmbr <span class="nt">-p</span> /boot/gptboot <span class="nt">-i</span> 1 da0
<span class="go">partcode written to da0p1
bootcode written to da0
</span></code></pre></div></div>

<p>The above command will install GPT boot code on the first partition -i (index 1) on disk da0. The -b option specifies PMBR (Protective MBR) boot code, and the -p option specifies GPT boot code.</p>

<p>If you want to use ZFS boot code, replace gptboot with gptzfsboot.</p>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">root@ns4:~ #</span><span class="w"> </span>gpart bootcode <span class="nt">-b</span> /boot/pmbr <span class="nt">-p</span> /boot/gptzfsboot <span class="nt">-i</span> 1 da0
<span class="go">partcode written to da0p1
bootcode written to da0
</span></code></pre></div></div>

<h3 id="j-creating-a-backup-partition---gpart-backup">j. Creating a Backup Partition - <code class="language-plaintext highlighter-rouge">gpart backup</code></h3>
<p>Creating a backup partition is very important, to anticipate system failure. With a backup partition, we can easily recover damaged or lost partitions.</p>

<p>Creating a backup partition can be done with the gpart backup command. This command displays information about the partition table in a special text format. You can direct this information to a file, or send it to the “gpart restore” command to restore the partition.</p>

<p>Here is a simple gpart backup command.</p>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">root@ns4:~ #</span><span class="w"> </span>gpart backup ada0
<span class="go">GPT 128
1   freebsd-boot        40      1024 gptboot0
2   freebsd-swap      2048   4194304 swap0
3    freebsd-zfs   4196352 484200448 zfs0
</span></code></pre></div></div>

<p>In order for the gpart backup command to operate optimally, during recovery. It is recommended to create a special file for the backup partition, as in the following example.</p>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">root@ns4:~ #</span><span class="w"> </span>gpart backup da0 <span class="o">&gt;</span> /mnt/da0.backup
</code></pre></div></div>

<h3 id="k-recovering-partitions---gpart-restore">k. Recovering Partitions - <code class="language-plaintext highlighter-rouge">gpart restore</code></h3>
<p>If you accidentally destroy the GPT partition table, you still have a few options to recover it. Note that you have already backed up the partition using the gpart backup command, otherwise you have a lot more work to do.</p>

<p>Now, if you have previously backed up the partition table using the gpart backup command, then you are in luck and most likely only need a few shell commands to get the system back to normal.</p>

<p>We will give an example of running the gpart restore command to restore a deleted partition. Follow each command that we show.</p>

<h4 id="k1-delete-partition">k.1. Delete Partition</h4>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">root@ns4:~ #</span><span class="w"> </span>gpart destroy <span class="nt">-F</span> /dev/da0
</code></pre></div></div>

<h4 id="k2-create-a-table-of-partition-schemes-and-partition-types">k.2. Create a table of partition schemes and partition types.</h4>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">root@ns4:~ #</span><span class="w"> </span>gpart create <span class="nt">-s</span> gpt da0
<span class="gp">root@ns4:~ #</span><span class="w"> </span>gpart add <span class="nt">-s</span> 64k <span class="nt">-t</span> freebsd-boot da0
<span class="gp">root@ns4:~ #</span><span class="w"> </span>gpart add <span class="nt">-s</span> 6G <span class="nt">-t</span> freebsd-ufs da0
<span class="gp">root@ns4:~ #</span><span class="w"> </span>gpart add <span class="nt">-t</span> freebsd-swap da0
<span class="gp">root@ns4:~ #</span><span class="w"> </span>gpart bootcode <span class="nt">-b</span> /boot/pmbr <span class="nt">-p</span> /boot/gptboot <span class="nt">-i</span> 1 da0
</code></pre></div></div>

<p>Now you can see the contents of the partitions on disk <code class="language-plaintext highlighter-rouge">da0</code>.</p>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">root@ns4:~ #</span><span class="w"> </span>gpart show da0
<span class="gp">=&gt;</span><span class="w">      </span>40  30834608  da0  GPT  <span class="o">(</span>15G<span class="o">)</span>
<span class="go">        40       128    1  freebsd-boot  (64K)
       168  12582912    2  freebsd-ufs  (6.0G)
  12583080  18251568    3  freebsd-swap  (8.7G)
</span></code></pre></div></div>

<p>The above commands are exactly the same as the default FreeBSD setup during installation.</p>
<ul>
  <li>The first partition should be freebsd-boot and its size will most likely be 64k.</li>
  <li>The second partition is the root partition (freebsd-ufs).</li>
  <li>The third partition is the swap (freebsd-swap).</li>
  <li>The other partitions depend on your configuration.</li>
</ul>

<h4 id="k3-create-backup-partition">k.3. Create Backup Partition</h4>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">root@ns4:~ #</span><span class="w"> </span>gpart backup da0 <span class="o">&gt;</span> /mnt/da0.backup
</code></pre></div></div>

<h4 id="k4-delete-partition">k.4. Delete Partition</h4>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">root@ns4:~ #</span><span class="w"> </span>gpart destroy <span class="nt">-F</span> /dev/da0
</code></pre></div></div>

<h4 id="k5-recover-partition">k.5. Recover Partition</h4>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">root@ns4:~ #</span><span class="w"> </span>gpart restore <span class="nt">-F</span> da0 &lt; /mnt/da0.backup
</code></pre></div></div>

<p>In the recovery command, the -F option will first completely wipe the existing data from the partition table, then restore the table from the file.</p>

<p>The main gpart commands in man gpart have been discussed in detail. You just need to learn each command that is executed. If you have difficulty learning the gpart command, you can comment or visit the official <code class="language-plaintext highlighter-rouge">gpart</code> website directly.</p>

        
      </section>

      <footer class="page__meta">
        
        
  


  
  
  

  <p class="page__taxonomy">
    <strong><i class="fas fa-fw fa-tags" aria-hidden="true"></i> Tags: </strong>
    <span itemprop="keywords">
    
      
      
      <a href="/tags/#sysadmin" class="page__taxonomy-item" rel="tag">SysAdmin</a>
    
    </span>
  </p>




  


  
  
  

  <p class="page__taxonomy">
    <strong><i class="fas fa-fw fa-folder-open" aria-hidden="true"></i> Categories: </strong>
    <span itemprop="keywords">
    
      
      
      <a href="/categories/#freebsd" class="page__taxonomy-item" rel="tag">FreeBSD</a>
    
    </span>
  </p>


        
  <p class="page__date"><strong><i class="fas fa-fw fa-calendar-alt" aria-hidden="true"></i> Updated:</strong> <time datetime="2025-05-05T19:45:33+03:00">May 5, 2025</time></p>


      </footer>

      <section class="page__share">
  

  <a href="https://twitter.com/intent/tweet?via=iwanset96143401&text=gpart+Command+To+Manage+Disk+Partitions+in+FreeBSD+-+Part+2%20https%3A%2F%2Funixwinbsd.site%2Ffreebsd%2Fgpart-command-manage-disk-partitions-2%2F" class="btn btn--twitter" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" title="Share on Twitter"><i class="fab fa-fw fa-twitter" aria-hidden="true"></i><span> Twitter</span></a>

  <a href="https://www.facebook.com/sharer/sharer.php?u=https%3A%2F%2Funixwinbsd.site%2Ffreebsd%2Fgpart-command-manage-disk-partitions-2%2F" class="btn btn--facebook" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" title="Share on Facebook"><i class="fab fa-fw fa-facebook" aria-hidden="true"></i><span> Facebook</span></a>

  <a href="https://www.linkedin.com/shareArticle?mini=true&url=https%3A%2F%2Funixwinbsd.site%2Ffreebsd%2Fgpart-command-manage-disk-partitions-2%2F" class="btn btn--linkedin" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" title="Share on LinkedIn"><i class="fab fa-fw fa-linkedin" aria-hidden="true"></i><span> LinkedIn</span></a>
</section>


      
  <nav class="pagination">
    
      <a href="/freebsd/gpart-command-manage-disk-partitions/" class="pagination--pager" title="gpart Command To Manage Disk Partitions in FreeBSD - Part 1
">Previous</a>
    
    
      <a href="/freebsd/swoole-php-freebsd-install-example/" class="pagination--pager" title="How to Install and Example of Using Swoole PHP on FreeBSD 14.1
">Next</a>
    
  </nav>

    </div>

    
  </article>

  
  
    <div class="page__related">
      <h4 class="page__related-title">You May Also Enjoy</h4>
      <div class="grid__wrapper">
        
          



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
    <h2 class="archive__item-title no_toc" itemprop="headline">
      
        <a href="/freebsd/use-pfsense-pfBlockerNG-dnsbl-block-ads-malware/" rel="permalink">Use PFSense with pfBlockerNG DNSBL to Block Ads, Malware, Ransomware, and Web Tracking
</a>
      
    </h2>
    

  <p class="page__meta">
    

    

    
      
      

      <span class="page__meta-readtime">
        <i class="far fa-clock" aria-hidden="true"></i>
        
          3 minute read
        
      </span>
    
  </p>


    <p class="archive__item-excerpt" itemprop="description">By adding the pfBlockerNG package to your PFSense Router, you’ve blocked ads and also been able to block web tracking, ransomware, and malware. When you acti...</p>
  </article>
</div>

        
          



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
    <h2 class="archive__item-title no_toc" itemprop="headline">
      
        <a href="/freebsd/installation-java-development-kit-on-freebsd/" rel="permalink">Installing and Using the Java Development Kit on FreeBSD
</a>
      
    </h2>
    

  <p class="page__meta">
    

    

    
      
      

      <span class="page__meta-readtime">
        <i class="far fa-clock" aria-hidden="true"></i>
        
          8 minute read
        
      </span>
    
  </p>


    <p class="archive__item-excerpt" itemprop="description">Redmine is open source software or application that uses the Ruby On Rails Framework. Redmine is a project management or project tracking application which r...</p>
  </article>
</div>

        
          



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
    <h2 class="archive__item-title no_toc" itemprop="headline">
      
        <a href="/freebsd/how-to-install-webmin-on-freebsd-machine/" rel="permalink">How to Install Webmin on a FreeBSD System
</a>
      
    </h2>
    

  <p class="page__meta">
    

    

    
      
      

      <span class="page__meta-readtime">
        <i class="far fa-clock" aria-hidden="true"></i>
        
          3 minute read
        
      </span>
    
  </p>


    <p class="archive__item-excerpt" itemprop="description">Webmin is a web-based system administration tool for Unix-like servers, and a service with approximately 1,000,000 annual installations worldwide
</p>
  </article>
</div>

        
          



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
    <h2 class="archive__item-title no_toc" itemprop="headline">
      
        <a href="/freebsd/configuration-radicale-caldav-cardavv-server-freebsd/" rel="permalink">How to Configure FreeBSD with Radicale CalDAV CardDAV Server
</a>
      
    </h2>
    

  <p class="page__meta">
    

    

    
      
      

      <span class="page__meta-readtime">
        <i class="far fa-clock" aria-hidden="true"></i>
        
          4 minute read
        
      </span>
    
  </p>


    <p class="archive__item-excerpt" itemprop="description">Radicale is run with the help of the Apache or NGINX web server, so it can be operated either as a standalone package using its internal http/https server or...</p>
  </article>
</div>

        
      </div>
    </div>
  
  
</div>

    </div>

    
      <div class="search-content">
        <div class="search-content__inner-wrap"><form class="search-content__form" onkeydown="return event.key != 'Enter';">
    <label class="sr-only" for="search">
      Enter your search term...
    </label>
    <input type="search" id="search" class="search-input" tabindex="-1" placeholder="Enter your search term..." />
  </form>
  <div id="results" class="results"></div></div>

      </div>
    

    <div id="footer" class="page__footer">
      <footer>
        <!-- start custom footer snippets -->

<!-- end custom footer snippets -->
        <div class="page__footer-follow">
  <ul class="social-icons">
    

    
      
        
          <li><a href="https://github.com/unixwinbsd/unixwinbsd.github.io" rel="nofollow noopener noreferrer"><i class="fab fa-fw fa-github" aria-hidden="true"></i> GitHub</a></li>
        
      
        
          <li><a href="https://www.linkedin.com/in/catanesi/" rel="nofollow noopener noreferrer"><i class="fab fa-fw fa-linkedin" aria-hidden="true"></i> LinkedIn Profile</a></li>
        
      
        
          <li><a href="https://github.com/unixwinbsd/unixwinbsd.github.io" rel="nofollow noopener noreferrer"><i class="fas fa-fw fa-link" aria-hidden="true"></i> Website</a></li>
        
      
    

    <li><a href="/feed.xml"><i class="fas fa-fw fa-rss-square" aria-hidden="true"></i> Feed</a></li>
  </ul>
</div>

<div class="page__footer-copyright">&copy; 2025 UnixBSDShell Blog. Powered by <a href="https://jekyllrb.com" rel="nofollow">Jekyll</a> &amp; <a href="https://mademistakes.com/work/minimal-mistakes-jekyll-theme/" rel="nofollow">Minimal Mistakes</a>.</div>

      </footer>
    </div>

    
  <script src="/assets/js/main.min.js"></script>




<script src="/assets/js/lunr/lunr.min.js"></script>
<script src="/assets/js/lunr/lunr-store.js"></script>
<script src="/assets/js/lunr/lunr-en.js"></script>




    
  <script>
    var disqus_config = function () {
      this.page.url = "https://unixwinbsd.site/freebsd/gpart-command-manage-disk-partitions-2/";  /* Replace PAGE_URL with your page's canonical URL variable */
      this.page.identifier = "/freebsd/gpart-command-manage-disk-partitions-2"; /* Replace PAGE_IDENTIFIER with your page's unique identifier variable */
    };
    (function() { /* DON'T EDIT BELOW THIS LINE */
      var d = document, s = d.createElement('script');
      s.src = 'https://UnixBSDShell.disqus.com/embed.js';
      s.setAttribute('data-timestamp', +new Date());
      (d.head || d.body).appendChild(s);
    })();
  </script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>


  







  </body>
</html>
